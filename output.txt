echo "Expect: go1.14" && \
		echo "Actual: $(docker run --rm -u 501 -v /Users/mcampo:/Users/mcampo -e HOME -e USER=mcampo -e USERNAME=mcampo -w /Users/mcampo/workspace/cloud-service-broker -e GOARCH -e GOOS -e CGO_ENABLED golang:1.14 go version)" && \
	 	docker run --rm -u 501 -v /Users/mcampo:/Users/mcampo -e HOME -e USER=mcampo -e USERNAME=mcampo -w /Users/mcampo/workspace/cloud-service-broker -e GOARCH -e GOOS -e CGO_ENABLED golang:1.14 go version | grep go1.14 > /dev/null
Expect: go1.14
Actual: go version go1.14.15 linux/amd64
docker run --rm -u 501 -v /Users/mcampo:/Users/mcampo -e HOME -e USER=mcampo -e USERNAME=mcampo -w /Users/mcampo/workspace/cloud-service-broker -e GOARCH -e GOOS -e CGO_ENABLED golang:1.14 go test -v ./... -tags=service_broker
?   	github.com/cloudfoundry-incubator/cloud-service-broker	[no test files]
=== RUN   TestNewBrokerConfigFromEnv
2021/02/22 15:18:04 examining file ./
2021/02/22 15:18:04 examining file broker_config.go
2021/02/22 15:18:04 examining file broker_config_test.go
2021/02/22 15:18:04 examining file brokers_test.go
2021/02/22 15:18:04 examining file service_broker.go
--- PASS: TestNewBrokerConfigFromEnv (0.04s)
=== RUN   TestGCPServiceBroker_Services
--- PASS: TestGCPServiceBroker_Services (0.63s)
=== RUN   TestGCPServiceBroker_Provision
=== RUN   TestGCPServiceBroker_Provision/requires-async
    brokers_test.go:237: Creating broker
    brokers_test.go:246: Running check
{"timestamp":"1614007085.563646555","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":false,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
=== RUN   TestGCPServiceBroker_Provision/unknown-service-id
    brokers_test.go:237: Creating broker
    brokers_test.go:246: Running check
{"timestamp":"1614007085.975856781","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"bad-service-id","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
=== RUN   TestGCPServiceBroker_Provision/unknown-plan-id
    brokers_test.go:237: Creating broker
    brokers_test.go:246: Running check
{"timestamp":"1614007086.357510328","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"bad-plan-id","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
=== RUN   TestGCPServiceBroker_Provision/bad-request-json
    brokers_test.go:237: Creating broker
    brokers_test.go:246: Running check
{"timestamp":"1614007086.697629452","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"data_dump":"lager.Data{\"accepts_incomplete\":true, \"details\":brokerapi.ProvisionDetails{ServiceID:\"b9e4332e-b42b-4680-bda5-ea1506797474\", PlanID:\"e1d11f65-da66-46ad-977c-6d56513baf43\", OrganizationGUID:\"\", SpaceGUID:\"\", RawContext:json.RawMessage(nil), RawParameters:json.RawMessage{0x7b, 0x69, 0x6e, 0x76, 0x61, 0x6c, 0x69, 0x64, 0x20, 0x6a, 0x73, 0x6f, 0x6e}, MaintenanceInfo:brokerapi.MaintenanceInfo{Public:map[string]string(nil), Private:\"\"}}, \"instanceId\":\"newid\"}","lager serialisation error":"json: error calling MarshalJSON for type json.RawMessage: invalid character 'i' looking for beginning of object key string"}}
=== RUN   TestGCPServiceBroker_Provision/good-request
    brokers_test.go:237: Creating broker
{"timestamp":"1614007086.879750967","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
=== RUN   TestGCPServiceBroker_Provision/duplicate-request
    brokers_test.go:237: Creating broker
{"timestamp":"1614007087.078576565","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007087.093017817","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
--- PASS: TestGCPServiceBroker_Provision (2.09s)
    --- PASS: TestGCPServiceBroker_Provision/requires-async (0.57s)
    --- PASS: TestGCPServiceBroker_Provision/unknown-service-id (0.41s)
    --- PASS: TestGCPServiceBroker_Provision/unknown-plan-id (0.38s)
    --- PASS: TestGCPServiceBroker_Provision/bad-request-json (0.34s)
    --- PASS: TestGCPServiceBroker_Provision/good-request (0.20s)
    --- PASS: TestGCPServiceBroker_Provision/duplicate-request (0.20s)
=== RUN   TestGCPServiceBroker_Deprovision
=== RUN   TestGCPServiceBroker_Deprovision/instance-does-not-exist
    brokers_test.go:237: Creating broker
    brokers_test.go:246: Running check
{"timestamp":"1614007087.298917055","source":"brokers-test","message":"brokers-test.Deprovisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Deprovision/async-required
    brokers_test.go:237: Creating broker
{"timestamp":"1614007087.511426449","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007087.534998894","source":"brokers-test","message":"brokers-test.Deprovisioning","log_level":1,"data":{"accepts_incomplete":false,"details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Deprovision/async-deprovision-returns-operation
    brokers_test.go:237: Creating broker
{"timestamp":"1614007087.737639904","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007087.758632660","source":"brokers-test","message":"brokers-test.Deprovisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Deprovision/async-deprovision-updates-db
    brokers_test.go:237: Creating broker
{"timestamp":"1614007087.967919588","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007087.987392664","source":"brokers-test","message":"brokers-test.Deprovisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Deprovision/good-request
    brokers_test.go:237: Creating broker
{"timestamp":"1614007088.195876122","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007088.215501308","source":"brokers-test","message":"brokers-test.Deprovisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Deprovision/duplicate-deprovision
    brokers_test.go:237: Creating broker
{"timestamp":"1614007088.435776472","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
{"timestamp":"1614007088.455892563","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
{"timestamp":"1614007088.469571829","source":"brokers-test","message":"brokers-test.Unbinding","log_level":1,"data":{"binding_id":"newbinding","details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
{"timestamp":"1614007088.481118917","source":"brokers-test","message":"brokers-test.Deprovisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007088.490291119","source":"brokers-test","message":"brokers-test.Deprovisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
--- PASS: TestGCPServiceBroker_Deprovision (1.40s)
    --- PASS: TestGCPServiceBroker_Deprovision/instance-does-not-exist (0.21s)
    --- PASS: TestGCPServiceBroker_Deprovision/async-required (0.24s)
    --- PASS: TestGCPServiceBroker_Deprovision/async-deprovision-returns-operation (0.23s)
    --- PASS: TestGCPServiceBroker_Deprovision/async-deprovision-updates-db (0.23s)
    --- PASS: TestGCPServiceBroker_Deprovision/good-request (0.23s)
    --- PASS: TestGCPServiceBroker_Deprovision/duplicate-deprovision (0.27s)
=== RUN   TestGCPServiceBroker_Bind
=== RUN   TestGCPServiceBroker_Bind/good-request-with-credstore
    brokers_test.go:237: Creating broker
{"timestamp":"1614007088.719886065","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
{"timestamp":"1614007088.738424301","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
    brokers_test.go:246: Running check
=== RUN   TestGCPServiceBroker_Bind/duplicate-request
    brokers_test.go:237: Creating broker
{"timestamp":"1614007088.957511187","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
{"timestamp":"1614007088.979452133","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007088.991508245","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Bind/bad-bind-call
    brokers_test.go:237: Creating broker
{"timestamp":"1614007089.196054697","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007089.214640617","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"bad-bind-call","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","parameters":{"role":"project.admin"}},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Bind/bad-request-json
    brokers_test.go:237: Creating broker
{"timestamp":"1614007089.423282146","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007089.443710327","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"data_dump":"lager.Data{\"binding_id\":\"newbinding\", \"details\":brokerapi.BindDetails{AppGUID:\"\", PlanID:\"e1d11f65-da66-46ad-977c-6d56513baf43\", ServiceID:\"b9e4332e-b42b-4680-bda5-ea1506797474\", BindResource:(*brokerapi.BindResource)(nil), RawContext:json.RawMessage(nil), RawParameters:json.RawMessage{0x7b, 0x69, 0x6e, 0x76, 0x61, 0x6c, 0x69, 0x64, 0x20, 0x6a, 0x73, 0x6f, 0x6e}}, \"instance_id\":\"newid\"}","lager serialisation error":"json: error calling MarshalJSON for type json.RawMessage: invalid character 'i' looking for beginning of object key string"}}
=== RUN   TestGCPServiceBroker_Bind/bind-variables-override-instance-variables
    brokers_test.go:237: Creating broker
{"timestamp":"1614007089.638509274","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007089.657342672","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"override-params","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Bind/bind-returns-credhub-ref
    brokers_test.go:237: Creating broker
{"timestamp":"1614007089.861180305","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007089.880213976","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"override-params","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Bind/good-request
    brokers_test.go:237: Creating broker
{"timestamp":"1614007090.086635351","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
{"timestamp":"1614007090.106932878","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
    brokers_test.go:246: Running check
--- PASS: TestGCPServiceBroker_Bind (1.63s)
    --- PASS: TestGCPServiceBroker_Bind/good-request-with-credstore (0.26s)
    --- PASS: TestGCPServiceBroker_Bind/duplicate-request (0.24s)
    --- PASS: TestGCPServiceBroker_Bind/bad-bind-call (0.22s)
    --- PASS: TestGCPServiceBroker_Bind/bad-request-json (0.23s)
    --- PASS: TestGCPServiceBroker_Bind/bind-variables-override-instance-variables (0.22s)
    --- PASS: TestGCPServiceBroker_Bind/bind-returns-credhub-ref (0.22s)
    --- PASS: TestGCPServiceBroker_Bind/good-request (0.23s)
=== RUN   TestGCPServiceBroker_Unbind
=== RUN   TestGCPServiceBroker_Unbind/good-request-with-credhub
    brokers_test.go:237: Creating broker
{"timestamp":"1614007090.313800812","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
{"timestamp":"1614007090.336202145","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007090.348030090","source":"brokers-test","message":"brokers-test.Unbinding","log_level":1,"data":{"binding_id":"newbinding","details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Unbind/multiple-unbinds
    brokers_test.go:237: Creating broker
{"timestamp":"1614007090.558316708","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
{"timestamp":"1614007090.576467276","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
{"timestamp":"1614007090.587348223","source":"brokers-test","message":"brokers-test.Unbinding","log_level":1,"data":{"binding_id":"newbinding","details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007090.597942591","source":"brokers-test","message":"brokers-test.Unbinding","log_level":1,"data":{"binding_id":"newbinding","details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Unbind/good-request
    brokers_test.go:237: Creating broker
{"timestamp":"1614007090.794312954","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
{"timestamp":"1614007090.812645435","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007090.826180458","source":"brokers-test","message":"brokers-test.Unbinding","log_level":1,"data":{"binding_id":"newbinding","details":{"plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
--- PASS: TestGCPServiceBroker_Unbind (0.72s)
    --- PASS: TestGCPServiceBroker_Unbind/good-request-with-credhub (0.24s)
    --- PASS: TestGCPServiceBroker_Unbind/multiple-unbinds (0.24s)
    --- PASS: TestGCPServiceBroker_Unbind/good-request (0.24s)
=== RUN   TestGCPServiceBroker_LastOperation
=== RUN   TestGCPServiceBroker_LastOperation/called-on-async-service
    brokers_test.go:237: Creating broker
{"timestamp":"1614007091.033672094","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007091.053424597","source":"brokers-test","message":"brokers-test.Last Operation","log_level":1,"data":{"instance_id":"newid","operation_data":"operationtoken","plan_id":"","service_id":""}}
=== RUN   TestGCPServiceBroker_LastOperation/poll-returns-retryable-error
    brokers_test.go:237: Creating broker
{"timestamp":"1614007091.300208807","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007091.321255207","source":"brokers-test","message":"brokers-test.Last Operation","log_level":1,"data":{"instance_id":"newid","operation_data":"operationtoken","plan_id":"","service_id":""}}
=== RUN   TestGCPServiceBroker_LastOperation/poll-returns-failure
    brokers_test.go:237: Creating broker
{"timestamp":"1614007091.558194399","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007091.577861071","source":"brokers-test","message":"brokers-test.Last Operation","log_level":1,"data":{"instance_id":"newid","operation_data":"operationtoken","plan_id":"","service_id":""}}
=== RUN   TestGCPServiceBroker_LastOperation/poll-returns-not-done
    brokers_test.go:237: Creating broker
{"timestamp":"1614007091.780155897","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007091.798343182","source":"brokers-test","message":"brokers-test.Last Operation","log_level":1,"data":{"instance_id":"newid","operation_data":"operationtoken","plan_id":"","service_id":""}}
=== RUN   TestGCPServiceBroker_LastOperation/poll-returns-success
    brokers_test.go:237: Creating broker
{"timestamp":"1614007091.990536690","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007092.009894848","source":"brokers-test","message":"brokers-test.Last Operation","log_level":1,"data":{"instance_id":"newid","operation_data":"operationtoken","plan_id":"","service_id":""}}
=== RUN   TestGCPServiceBroker_LastOperation/missing-instance
    brokers_test.go:237: Creating broker
{"timestamp":"1614007092.211866140","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007092.230928183","source":"brokers-test","message":"brokers-test.Last Operation","log_level":1,"data":{"instance_id":"invalid-instance-id","operation_data":"operationtoken","plan_id":"","service_id":""}}
=== RUN   TestGCPServiceBroker_LastOperation/called-on-synchronous-service
    brokers_test.go:237: Creating broker
{"timestamp":"1614007092.437761068","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007092.465264082","source":"brokers-test","message":"brokers-test.Last Operation","log_level":1,"data":{"instance_id":"newid","operation_data":"operationtoken","plan_id":"","service_id":""}}
--- PASS: TestGCPServiceBroker_LastOperation (1.63s)
    --- PASS: TestGCPServiceBroker_LastOperation/called-on-async-service (0.22s)
    --- PASS: TestGCPServiceBroker_LastOperation/poll-returns-retryable-error (0.27s)
    --- PASS: TestGCPServiceBroker_LastOperation/poll-returns-failure (0.26s)
    --- PASS: TestGCPServiceBroker_LastOperation/poll-returns-not-done (0.22s)
    --- PASS: TestGCPServiceBroker_LastOperation/poll-returns-success (0.22s)
    --- PASS: TestGCPServiceBroker_LastOperation/missing-instance (0.21s)
    --- PASS: TestGCPServiceBroker_LastOperation/called-on-synchronous-service (0.23s)
=== RUN   TestGCPServiceBroker_GetBinding
=== RUN   TestGCPServiceBroker_GetBinding/called-on-bound
    brokers_test.go:237: Creating broker
{"timestamp":"1614007092.693881035","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
{"timestamp":"1614007092.733946085","source":"brokers-test","message":"brokers-test.Binding","log_level":1,"data":{"binding_id":"newbinding","details":{"app_guid":"","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","service_id":"b9e4332e-b42b-4680-bda5-ea1506797474"},"instance_id":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007092.768331051","source":"brokers-test","message":"brokers-test.GetBinding","log_level":1,"data":{"binding_id":"newbinding","instance_id":"newid"}}
--- PASS: TestGCPServiceBroker_GetBinding (0.31s)
    --- PASS: TestGCPServiceBroker_GetBinding/called-on-bound (0.31s)
=== RUN   TestGCPServiceBroker_GetInstance
=== RUN   TestGCPServiceBroker_GetInstance/called-while-provisioned
    brokers_test.go:237: Creating broker
{"timestamp":"1614007092.995508194","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007093.012265205","source":"brokers-test","message":"brokers-test.GetInstance","log_level":1,"data":{"instance_id":"newid"}}
--- PASS: TestGCPServiceBroker_GetInstance (0.24s)
    --- PASS: TestGCPServiceBroker_GetInstance/called-while-provisioned (0.24s)
=== RUN   TestGCPServiceBroker_LastBindingOperation
=== RUN   TestGCPServiceBroker_LastBindingOperation/called-while-bound
    brokers_test.go:237: Creating broker
{"timestamp":"1614007093.214944363","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007093.234973669","source":"brokers-test","message":"brokers-test.LastBindingOperation","log_level":1,"data":{"binding_id":"newbinding","instance_id":"newid","operation_data":"","plan_id":"","service_id":""}}
--- PASS: TestGCPServiceBroker_LastBindingOperation (0.22s)
    --- PASS: TestGCPServiceBroker_LastBindingOperation/called-while-bound (0.22s)
=== RUN   TestGCPServiceBroker_Update
=== RUN   TestGCPServiceBroker_Update/good-request-valid-parameter
    brokers_test.go:237: Creating broker
{"timestamp":"1614007093.453744650","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007093.475025892","source":"brokers-test","message":"brokers-test.Updating","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","parameters":{"force_delete":"false"},"previous_values":{"plan_id":"","service_id":"","organization_id":"","space_id":""},"maintenance_info":{}},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Update/good-request
    brokers_test.go:237: Creating broker
{"timestamp":"1614007093.715147734","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007093.734323263","source":"brokers-test","message":"brokers-test.Updating","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","previous_values":{"plan_id":"","service_id":"","organization_id":"","space_id":""},"maintenance_info":{}},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Update/missing-instance
    brokers_test.go:237: Creating broker
{"timestamp":"1614007093.941000938","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007093.959711313","source":"brokers-test","message":"brokers-test.Updating","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","previous_values":{"plan_id":"","service_id":"","organization_id":"","space_id":""},"maintenance_info":{}},"instance_id":"bogus-id"}}
=== RUN   TestGCPServiceBroker_Update/requires-async
    brokers_test.go:237: Creating broker
{"timestamp":"1614007094.157896519","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007094.177848577","source":"brokers-test","message":"brokers-test.Updating","log_level":1,"data":{"accepts_incomplete":false,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","previous_values":{"plan_id":"","service_id":"","organization_id":"","space_id":""},"maintenance_info":{}},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Update/instance-does-not-exist
    brokers_test.go:237: Creating broker
    brokers_test.go:246: Running check
{"timestamp":"1614007094.387455463","source":"brokers-test","message":"brokers-test.Updating","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","previous_values":{"plan_id":"","service_id":"","organization_id":"","space_id":""},"maintenance_info":{}},"instance_id":"newid"}}
=== RUN   TestGCPServiceBroker_Update/bad-request-json
    brokers_test.go:237: Creating broker
{"timestamp":"1614007094.581221104","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007094.599416018","source":"brokers-test","message":"brokers-test.Updating","log_level":1,"data":{"data_dump":"lager.Data{\"accepts_incomplete\":true, \"details\":brokerapi.UpdateDetails{ServiceID:\"b9e4332e-b42b-4680-bda5-ea1506797474\", PlanID:\"e1d11f65-da66-46ad-977c-6d56513baf43\", RawParameters:json.RawMessage{0x7b, 0x69, 0x6e, 0x76, 0x61, 0x6c, 0x69, 0x64, 0x20, 0x6a, 0x73, 0x6f, 0x6e}, PreviousValues:brokerapi.PreviousValues{PlanID:\"\", ServiceID:\"\", OrgID:\"\", SpaceID:\"\"}, RawContext:json.RawMessage(nil), MaintenanceInfo:brokerapi.MaintenanceInfo{Public:map[string]string(nil), Private:\"\"}}, \"instance_id\":\"newid\"}","lager serialisation error":"json: error calling MarshalJSON for type json.RawMessage: invalid character 'i' looking for beginning of object key string"}}
=== RUN   TestGCPServiceBroker_Update/attempt-to-update-non-updatable-parameter
    brokers_test.go:237: Creating broker
{"timestamp":"1614007094.791991234","source":"brokers-test","message":"brokers-test.Provisioning","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","organization_guid":"","space_guid":"","maintenance_info":{}},"instanceId":"newid"}}
    brokers_test.go:246: Running check
{"timestamp":"1614007094.812442541","source":"brokers-test","message":"brokers-test.Updating","log_level":1,"data":{"accepts_incomplete":true,"details":{"service_id":"b9e4332e-b42b-4680-bda5-ea1506797474","plan_id":"e1d11f65-da66-46ad-977c-6d56513baf43","parameters":{"location":"new-location"},"previous_values":{"plan_id":"","service_id":"","organization_id":"","space_id":""},"maintenance_info":{}},"instance_id":"newid"}}
--- PASS: TestGCPServiceBroker_Update (1.58s)
    --- PASS: TestGCPServiceBroker_Update/good-request-valid-parameter (0.25s)
    --- PASS: TestGCPServiceBroker_Update/good-request (0.25s)
    --- PASS: TestGCPServiceBroker_Update/missing-instance (0.22s)
    --- PASS: TestGCPServiceBroker_Update/requires-async (0.22s)
    --- PASS: TestGCPServiceBroker_Update/instance-does-not-exist (0.21s)
    --- PASS: TestGCPServiceBroker_Update/bad-request-json (0.21s)
    --- PASS: TestGCPServiceBroker_Update/attempt-to-update-non-updatable-parameter (0.21s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/brokerapi/brokers	10.569s
?   	github.com/cloudfoundry-incubator/cloud-service-broker/cmd	[no test files]
=== RUN   TestSqlDatastore_ServiceInstanceDetailsDAO
--- PASS: TestSqlDatastore_ServiceInstanceDetailsDAO (0.02s)
=== RUN   TestSqlDatastore_GetServiceInstanceDetailsById
--- PASS: TestSqlDatastore_GetServiceInstanceDetailsById (0.00s)
=== RUN   TestSqlDatastore_ExistsServiceInstanceDetailsById
--- PASS: TestSqlDatastore_ExistsServiceInstanceDetailsById (0.00s)
=== RUN   TestSqlDatastore_ServiceBindingCredentialsDAO
--- PASS: TestSqlDatastore_ServiceBindingCredentialsDAO (0.00s)
=== RUN   TestSqlDatastore_GetServiceBindingCredentialsByServiceInstanceIdAndBindingId
--- PASS: TestSqlDatastore_GetServiceBindingCredentialsByServiceInstanceIdAndBindingId (0.00s)
=== RUN   TestSqlDatastore_ExistsServiceBindingCredentialsByServiceInstanceIdAndBindingId
--- PASS: TestSqlDatastore_ExistsServiceBindingCredentialsByServiceInstanceIdAndBindingId (0.00s)
=== RUN   TestSqlDatastore_GetServiceBindingCredentialsByBindingId
--- PASS: TestSqlDatastore_GetServiceBindingCredentialsByBindingId (0.00s)
=== RUN   TestSqlDatastore_ExistsServiceBindingCredentialsByBindingId
--- PASS: TestSqlDatastore_ExistsServiceBindingCredentialsByBindingId (0.00s)
=== RUN   TestSqlDatastore_GetServiceBindingCredentialsById
--- PASS: TestSqlDatastore_GetServiceBindingCredentialsById (0.00s)
=== RUN   TestSqlDatastore_ExistsServiceBindingCredentialsById
--- PASS: TestSqlDatastore_ExistsServiceBindingCredentialsById (0.00s)
=== RUN   TestSqlDatastore_ProvisionRequestDetailsDAO
--- PASS: TestSqlDatastore_ProvisionRequestDetailsDAO (0.00s)
=== RUN   TestSqlDatastore_GetProvisionRequestDetailsById
--- PASS: TestSqlDatastore_GetProvisionRequestDetailsById (0.00s)
=== RUN   TestSqlDatastore_ExistsProvisionRequestDetailsById
--- PASS: TestSqlDatastore_ExistsProvisionRequestDetailsById (0.03s)
=== RUN   TestSqlDatastore_GetsProvisionRequestDetailsByInstanceId
--- PASS: TestSqlDatastore_GetsProvisionRequestDetailsByInstanceId (0.00s)
=== RUN   TestSqlDatastore_TerraformDeploymentDAO
--- PASS: TestSqlDatastore_TerraformDeploymentDAO (0.01s)
=== RUN   TestSqlDatastore_GetTerraformDeploymentById
--- PASS: TestSqlDatastore_GetTerraformDeploymentById (0.00s)
=== RUN   TestSqlDatastore_ExistsTerraformDeploymentById
--- PASS: TestSqlDatastore_ExistsTerraformDeploymentById (0.00s)
=== RUN   TestValidateLastMigration
=== RUN   TestValidateLastMigration/future
=== RUN   TestValidateLastMigration/far-future
=== RUN   TestValidateLastMigration/new-db
=== RUN   TestValidateLastMigration/v3-to-v4
=== RUN   TestValidateLastMigration/v4-to-v4.1
=== RUN   TestValidateLastMigration/v4.1-to-v4.2
=== RUN   TestValidateLastMigration/up-to-date
=== RUN   TestValidateLastMigration/before-v2
--- PASS: TestValidateLastMigration (0.00s)
    --- PASS: TestValidateLastMigration/future (0.00s)
    --- PASS: TestValidateLastMigration/far-future (0.00s)
    --- PASS: TestValidateLastMigration/new-db (0.00s)
    --- PASS: TestValidateLastMigration/v3-to-v4 (0.00s)
    --- PASS: TestValidateLastMigration/v4-to-v4.1 (0.00s)
    --- PASS: TestValidateLastMigration/v4.1-to-v4.2 (0.00s)
    --- PASS: TestValidateLastMigration/up-to-date (0.00s)
    --- PASS: TestValidateLastMigration/before-v2 (0.00s)
=== RUN   TestRunMigrations_Failures
=== RUN   TestRunMigrations_Failures/far-future
=== RUN   TestRunMigrations_Failures/before-v2
=== RUN   TestRunMigrations_Failures/future
--- PASS: TestRunMigrations_Failures (0.13s)
    --- PASS: TestRunMigrations_Failures/far-future (0.05s)
    --- PASS: TestRunMigrations_Failures/before-v2 (0.04s)
    --- PASS: TestRunMigrations_Failures/future (0.04s)
=== RUN   TestRunMigrations
=== RUN   TestRunMigrations/creates-migrations-table
=== RUN   TestRunMigrations/applies-all-migrations-when-run
=== RUN   TestRunMigrations/can-run-migrations-multiple-times
--- PASS: TestRunMigrations (1.12s)
    --- PASS: TestRunMigrations/creates-migrations-table (0.32s)
    --- PASS: TestRunMigrations/applies-all-migrations-when-run (0.39s)
    --- PASS: TestRunMigrations/can-run-migrations-multiple-times (0.41s)
=== RUN   TestParseVcapServices
=== RUN   TestParseVcapServices/google-cloud_vcap-service

db_service.VcapService{BindingName:"testbinding", InstanceName:"testinstance", Name:"kf-binding-tt2-mystorage", Label:"google-storage", Tags:[]string{"gcp", "cloudsql", "mysql"}, Plan:"nearline", Credentials:map[string]interface {}{"CaCert":"-truncated-", "ClientCert":"-truncated-", "ClientKey":"-truncated-", "Email":"pcf-binding-testbind@test-gsb.iam.gserviceaccount.com", "Name":"pcf-binding-testbind", "Password":"PASSWORD", "PrivateKeyData":"PRIVATEKEY", "ProjectId":"test-gsb", "Sha1Fingerprint":"aa3bade266136f733642ebdb4992b89eb05f83c4", "UniqueId":"108868434450972082663", "UriPrefix":"", "Username":"newuseraccount", "database_name":"service_broker", "host":"127.0.0.1", "instance_name":"pcf-sb-1-1561406852899716453", "last_master_operation_id":"", "region":"", "uri":"mysql://newuseraccount:PASSWORD@127.0.0.1/service_broker?ssl_mode=required"}}
=== RUN   TestParseVcapServices/pivotal_vcap_service

db_service.VcapService{BindingName:"", InstanceName:"", Name:"my-instance", Label:"p.mysql", Tags:[]string{"mysql"}, Plan:"db-medium", Credentials:map[string]interface {}{"hostname":"10.0.0.20", "jdbcUrl":"jdbc:mysql://10.0.0.20:3306/service_instance_db?user=fefcbe8360854a18a7994b870e7b0bf5&password=z9z6eskdbs1rhtxt", "name":"service_instance_db", "password":"z9z6eskdbs1rhtxt", "port":3306, "uri":"mysql://fefcbe8360854a18a7994b870e7b0bf5:z9z6eskdbs1rhtxt@10.0.0.20:3306/service_instance_db?reconnect=true", "username":"fefcbe8360854a18a7994b870e7b0bf5"}}
=== RUN   TestParseVcapServices/empty_vcap_service
=== RUN   TestParseVcapServices/invalid_vcap_service_-_more_than_one_mysql_tag
=== RUN   TestParseVcapServices/invalid_vcap_service_-_zero_mysql_tags
--- PASS: TestParseVcapServices (0.00s)
    --- PASS: TestParseVcapServices/google-cloud_vcap-service (0.00s)
    --- PASS: TestParseVcapServices/pivotal_vcap_service (0.00s)
    --- PASS: TestParseVcapServices/empty_vcap_service (0.00s)
    --- PASS: TestParseVcapServices/invalid_vcap_service_-_more_than_one_mysql_tag (0.00s)
    --- PASS: TestParseVcapServices/invalid_vcap_service_-_zero_mysql_tags (0.00s)
=== RUN   TestSetDatabaseCredentials
=== RUN   TestSetDatabaseCredentials/empty_vcap_service
=== RUN   TestSetDatabaseCredentials/valid_gcp_vcap_service
=== RUN   TestSetDatabaseCredentials/valid_pivotal_vcap_service
=== RUN   TestSetDatabaseCredentials/invalid_vcap_service_-_malformed_uri
--- PASS: TestSetDatabaseCredentials (0.00s)
    --- PASS: TestSetDatabaseCredentials/empty_vcap_service (0.00s)
    --- PASS: TestSetDatabaseCredentials/valid_gcp_vcap_service (0.00s)
    --- PASS: TestSetDatabaseCredentials/valid_pivotal_vcap_service (0.00s)
    --- PASS: TestSetDatabaseCredentials/invalid_vcap_service_-_malformed_uri (0.00s)
=== RUN   ExampleUseVcapServices
--- PASS: ExampleUseVcapServices (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/db_service	(cached)
?   	github.com/cloudfoundry-incubator/cloud-service-broker/db_service/models	[no test files]
=== RUN   TestServiceDefinition_UserDefinedPlans
=== RUN   TestServiceDefinition_UserDefinedPlans/default-no-plans
=== RUN   TestServiceDefinition_UserDefinedPlans/single-plan
=== RUN   TestServiceDefinition_UserDefinedPlans/bad-json
=== RUN   TestServiceDefinition_UserDefinedPlans/multiple-plans
=== RUN   TestServiceDefinition_UserDefinedPlans/missing-name
=== RUN   TestServiceDefinition_UserDefinedPlans/missing-id
=== RUN   TestServiceDefinition_UserDefinedPlans/missing-instances
=== RUN   TestServiceDefinition_UserDefinedPlans/tile_environment_variable
--- PASS: TestServiceDefinition_UserDefinedPlans (0.00s)
    --- PASS: TestServiceDefinition_UserDefinedPlans/default-no-plans (0.00s)
    --- PASS: TestServiceDefinition_UserDefinedPlans/single-plan (0.00s)
    --- PASS: TestServiceDefinition_UserDefinedPlans/bad-json (0.00s)
    --- PASS: TestServiceDefinition_UserDefinedPlans/multiple-plans (0.00s)
    --- PASS: TestServiceDefinition_UserDefinedPlans/missing-name (0.00s)
    --- PASS: TestServiceDefinition_UserDefinedPlans/missing-id (0.00s)
    --- PASS: TestServiceDefinition_UserDefinedPlans/missing-instances (0.00s)
    --- PASS: TestServiceDefinition_UserDefinedPlans/tile_environment_variable (0.00s)
=== RUN   TestServiceDefinition_CatalogEntry
=== RUN   TestServiceDefinition_CatalogEntry/no-customization
=== RUN   TestServiceDefinition_CatalogEntry/custom-plans
=== RUN   TestServiceDefinition_CatalogEntry/bad-plan-json
--- PASS: TestServiceDefinition_CatalogEntry (0.00s)
    --- PASS: TestServiceDefinition_CatalogEntry/no-customization (0.00s)
    --- PASS: TestServiceDefinition_CatalogEntry/custom-plans (0.00s)
    --- PASS: TestServiceDefinition_CatalogEntry/bad-plan-json (0.00s)
=== RUN   TestServiceDefinition_ProvisionVariables
=== RUN   TestServiceDefinition_ProvisionVariables/user_location_and_name
=== RUN   TestServiceDefinition_ProvisionVariables/operator_defaults_override_computed_defaults
=== RUN   TestServiceDefinition_ProvisionVariables/global_default_override_defaults_but_not_computed_defaults
=== RUN   TestServiceDefinition_ProvisionVariables/bogus_global_default_json
=== RUN   TestServiceDefinition_ProvisionVariables/empty
=== RUN   TestServiceDefinition_ProvisionVariables/service_has_missing_param
=== RUN   TestServiceDefinition_ProvisionVariables/location_gets_truncated
=== RUN   TestServiceDefinition_ProvisionVariables/invalid-request
=== RUN   TestServiceDefinition_ProvisionVariables/provision_overrides_override_user_params_and_global_defaults_but_not_computed_defaults
=== RUN   TestServiceDefinition_ProvisionVariables/user_tries_to_overwrite_service_var
=== RUN   TestServiceDefinition_ProvisionVariables/user_values_override_operator_defaults
=== RUN   TestServiceDefinition_ProvisionVariables/operator_defaults_are_not_evaluated
--- PASS: TestServiceDefinition_ProvisionVariables (0.01s)
    --- PASS: TestServiceDefinition_ProvisionVariables/user_location_and_name (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/operator_defaults_override_computed_defaults (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/global_default_override_defaults_but_not_computed_defaults (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/bogus_global_default_json (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/empty (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/service_has_missing_param (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/location_gets_truncated (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/invalid-request (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/provision_overrides_override_user_params_and_global_defaults_but_not_computed_defaults (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/user_tries_to_overwrite_service_var (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/user_values_override_operator_defaults (0.00s)
    --- PASS: TestServiceDefinition_ProvisionVariables/operator_defaults_are_not_evaluated (0.00s)
=== RUN   TestServiceDefinition_UpdateVariables
=== RUN   TestServiceDefinition_UpdateVariables/provision_overrides_override_user_params_and_global_defaults_but_not_computed_defaults
=== RUN   TestServiceDefinition_UpdateVariables/bogus_global_default_json
=== RUN   TestServiceDefinition_UpdateVariables/service_has_missing_param
=== RUN   TestServiceDefinition_UpdateVariables/user_location_and_name
=== RUN   TestServiceDefinition_UpdateVariables/user_tries_to_overwrite_service_var
=== RUN   TestServiceDefinition_UpdateVariables/user_values_override_operator_defaults
=== RUN   TestServiceDefinition_UpdateVariables/global_default_override_defaults_but_not_computed_defaults
=== RUN   TestServiceDefinition_UpdateVariables/provision_location_and_name
=== RUN   TestServiceDefinition_UpdateVariables/empty
=== RUN   TestServiceDefinition_UpdateVariables/invalid-request
=== RUN   TestServiceDefinition_UpdateVariables/operator_defaults_override_computed_defaults
=== RUN   TestServiceDefinition_UpdateVariables/operator_defaults_are_not_evaluated
=== RUN   TestServiceDefinition_UpdateVariables/update_location_and_name
=== RUN   TestServiceDefinition_UpdateVariables/location_gets_truncated
--- PASS: TestServiceDefinition_UpdateVariables (0.01s)
    --- PASS: TestServiceDefinition_UpdateVariables/provision_overrides_override_user_params_and_global_defaults_but_not_computed_defaults (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/bogus_global_default_json (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/service_has_missing_param (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/user_location_and_name (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/user_tries_to_overwrite_service_var (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/user_values_override_operator_defaults (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/global_default_override_defaults_but_not_computed_defaults (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/provision_location_and_name (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/empty (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/invalid-request (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/operator_defaults_override_computed_defaults (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/operator_defaults_are_not_evaluated (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/update_location_and_name (0.00s)
    --- PASS: TestServiceDefinition_UpdateVariables/location_gets_truncated (0.00s)
=== RUN   TestServiceDefinition_BindVariables
=== RUN   TestServiceDefinition_BindVariables/empty
=== RUN   TestServiceDefinition_BindVariables/location_gets_truncated
=== RUN   TestServiceDefinition_BindVariables/user_location_and_name
=== RUN   TestServiceDefinition_BindVariables/user_values_override_operator_defaults
=== RUN   TestServiceDefinition_BindVariables/bind_overrides_override_user_params_but_not_computed_defaults
=== RUN   TestServiceDefinition_BindVariables/operator_defaults_override_computed_defaults
=== RUN   TestServiceDefinition_BindVariables/operator_defaults_are_not_evaluated
=== RUN   TestServiceDefinition_BindVariables/instance_info_can_get_parsed
=== RUN   TestServiceDefinition_BindVariables/invalid-request
--- PASS: TestServiceDefinition_BindVariables (0.01s)
    --- PASS: TestServiceDefinition_BindVariables/empty (0.00s)
    --- PASS: TestServiceDefinition_BindVariables/location_gets_truncated (0.00s)
    --- PASS: TestServiceDefinition_BindVariables/user_location_and_name (0.00s)
    --- PASS: TestServiceDefinition_BindVariables/user_values_override_operator_defaults (0.00s)
    --- PASS: TestServiceDefinition_BindVariables/bind_overrides_override_user_params_but_not_computed_defaults (0.00s)
    --- PASS: TestServiceDefinition_BindVariables/operator_defaults_override_computed_defaults (0.00s)
    --- PASS: TestServiceDefinition_BindVariables/operator_defaults_are_not_evaluated (0.00s)
    --- PASS: TestServiceDefinition_BindVariables/instance_info_can_get_parsed (0.00s)
    --- PASS: TestServiceDefinition_BindVariables/invalid-request (0.00s)
=== RUN   TestServiceDefinition_createSchemas
--- PASS: TestServiceDefinition_createSchemas (0.00s)
=== RUN   TestRegistry_GetEnabledServices
=== RUN   TestRegistry_GetEnabledServices/eol
=== RUN   TestRegistry_GetEnabledServices/beta
=== RUN   TestRegistry_GetEnabledServices/deprecated
=== RUN   TestRegistry_GetEnabledServices/preview
=== RUN   TestRegistry_GetEnabledServices/unmaintained
--- PASS: TestRegistry_GetEnabledServices (0.00s)
    --- PASS: TestRegistry_GetEnabledServices/eol (0.00s)
    --- PASS: TestRegistry_GetEnabledServices/beta (0.00s)
    --- PASS: TestRegistry_GetEnabledServices/deprecated (0.00s)
    --- PASS: TestRegistry_GetEnabledServices/preview (0.00s)
    --- PASS: TestRegistry_GetEnabledServices/unmaintained (0.00s)
=== RUN   TestServiceDefinition_CheckProhibitUpdate
=== RUN   TestServiceDefinition_CheckProhibitUpdate/bad_json
=== RUN   TestServiceDefinition_CheckProhibitUpdate/empty
=== RUN   TestServiceDefinition_CheckProhibitUpdate/allowed
=== RUN   TestServiceDefinition_CheckProhibitUpdate/prohibited
--- PASS: TestServiceDefinition_CheckProhibitUpdate (0.00s)
    --- PASS: TestServiceDefinition_CheckProhibitUpdate/bad_json (0.00s)
    --- PASS: TestServiceDefinition_CheckProhibitUpdate/empty (0.00s)
    --- PASS: TestServiceDefinition_CheckProhibitUpdate/allowed (0.00s)
    --- PASS: TestServiceDefinition_CheckProhibitUpdate/prohibited (0.00s)
=== RUN   TestBrokerVariable_ToSchema
=== RUN   TestBrokerVariable_ToSchema/template_defaults
=== RUN   TestBrokerVariable_ToSchema/full_test
=== RUN   TestBrokerVariable_ToSchema/prohibit_update_is_copied
=== RUN   TestBrokerVariable_ToSchema/blank
=== RUN   TestBrokerVariable_ToSchema/enums_get_copied
=== RUN   TestBrokerVariable_ToSchema/details_are_copied
=== RUN   TestBrokerVariable_ToSchema/type_is_copied
=== RUN   TestBrokerVariable_ToSchema/default_is_copied
--- PASS: TestBrokerVariable_ToSchema (0.00s)
    --- PASS: TestBrokerVariable_ToSchema/template_defaults (0.00s)
    --- PASS: TestBrokerVariable_ToSchema/full_test (0.00s)
    --- PASS: TestBrokerVariable_ToSchema/prohibit_update_is_copied (0.00s)
    --- PASS: TestBrokerVariable_ToSchema/blank (0.00s)
    --- PASS: TestBrokerVariable_ToSchema/enums_get_copied (0.00s)
    --- PASS: TestBrokerVariable_ToSchema/details_are_copied (0.00s)
    --- PASS: TestBrokerVariable_ToSchema/type_is_copied (0.00s)
    --- PASS: TestBrokerVariable_ToSchema/default_is_copied (0.00s)
=== RUN   TestBrokerVariable_ValidateVariables
=== RUN   TestBrokerVariable_ValidateVariables/nil_vars_check
=== RUN   TestBrokerVariable_ValidateVariables/integer
=== RUN   TestBrokerVariable_ValidateVariables/unexpected_type
=== RUN   TestBrokerVariable_ValidateVariables/test_constraints
=== RUN   TestBrokerVariable_ValidateVariables/test_enum
=== RUN   TestBrokerVariable_ValidateVariables/test_missing
=== RUN   TestBrokerVariable_ValidateVariables/test_incorrect_schema
=== RUN   TestBrokerVariable_ValidateVariables/nil_params
--- PASS: TestBrokerVariable_ValidateVariables (0.00s)
    --- PASS: TestBrokerVariable_ValidateVariables/nil_vars_check (0.00s)
    --- PASS: TestBrokerVariable_ValidateVariables/integer (0.00s)
    --- PASS: TestBrokerVariable_ValidateVariables/unexpected_type (0.00s)
    --- PASS: TestBrokerVariable_ValidateVariables/test_constraints (0.00s)
    --- PASS: TestBrokerVariable_ValidateVariables/test_enum (0.00s)
    --- PASS: TestBrokerVariable_ValidateVariables/test_missing (0.00s)
    --- PASS: TestBrokerVariable_ValidateVariables/test_incorrect_schema (0.00s)
    --- PASS: TestBrokerVariable_ValidateVariables/nil_params (0.00s)
=== RUN   TestBrokerVariable_ApplyDefaults
=== RUN   TestBrokerVariable_ApplyDefaults/nil_check
=== RUN   TestBrokerVariable_ApplyDefaults/simple
=== RUN   TestBrokerVariable_ApplyDefaults/do_not_replace
--- PASS: TestBrokerVariable_ApplyDefaults (0.00s)
    --- PASS: TestBrokerVariable_ApplyDefaults/nil_check (0.00s)
    --- PASS: TestBrokerVariable_ApplyDefaults/simple (0.00s)
    --- PASS: TestBrokerVariable_ApplyDefaults/do_not_replace (0.00s)
=== RUN   TestFieldNameToLabel
=== RUN   TestFieldNameToLabel/blank
=== RUN   TestFieldNameToLabel/kebab-case
=== RUN   TestFieldNameToLabel/uri
=== RUN   TestFieldNameToLabel/id
=== RUN   TestFieldNameToLabel/gb
=== RUN   TestFieldNameToLabel/double_separator
=== RUN   TestFieldNameToLabel/single_char
=== RUN   TestFieldNameToLabel/snake_case
=== RUN   TestFieldNameToLabel/dot.notation
=== RUN   TestFieldNameToLabel/url
=== RUN   TestFieldNameToLabel/jdbc
--- PASS: TestFieldNameToLabel (0.00s)
    --- PASS: TestFieldNameToLabel/blank (0.00s)
    --- PASS: TestFieldNameToLabel/kebab-case (0.00s)
    --- PASS: TestFieldNameToLabel/uri (0.00s)
    --- PASS: TestFieldNameToLabel/id (0.00s)
    --- PASS: TestFieldNameToLabel/gb (0.00s)
    --- PASS: TestFieldNameToLabel/double_separator (0.00s)
    --- PASS: TestFieldNameToLabel/single_char (0.00s)
    --- PASS: TestFieldNameToLabel/snake_case (0.00s)
    --- PASS: TestFieldNameToLabel/dot.notation (0.00s)
    --- PASS: TestFieldNameToLabel/url (0.00s)
    --- PASS: TestFieldNameToLabel/jdbc (0.00s)
=== RUN   ExampleServiceDefinition_UserDefinedPlansProperty
--- PASS: ExampleServiceDefinition_UserDefinedPlansProperty (0.00s)
=== RUN   ExampleServiceDefinition_IsRoleWhitelistEnabled
--- PASS: ExampleServiceDefinition_IsRoleWhitelistEnabled (0.00s)
=== RUN   ExampleServiceDefinition_TileUserDefinedPlansVariable
--- PASS: ExampleServiceDefinition_TileUserDefinedPlansVariable (0.00s)
=== RUN   ExampleServiceDefinition_GetPlanById
--- PASS: ExampleServiceDefinition_GetPlanById (0.00s)
=== RUN   ExampleServiceDefinition_CatalogEntry
--- PASS: ExampleServiceDefinition_CatalogEntry (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/broker	0.062s
?   	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/broker/brokerfakes	[no test files]
=== RUN   TestCondition_AppliesTo
=== RUN   TestCondition_AppliesTo/key-not-in-truth
=== RUN   TestCondition_AppliesTo/blank-condition
=== RUN   TestCondition_AppliesTo/partial-condition
=== RUN   TestCondition_AppliesTo/mismatching-condition
--- PASS: TestCondition_AppliesTo (0.00s)
    --- PASS: TestCondition_AppliesTo/key-not-in-truth (0.00s)
    --- PASS: TestCondition_AppliesTo/blank-condition (0.00s)
    --- PASS: TestCondition_AppliesTo/partial-condition (0.00s)
    --- PASS: TestCondition_AppliesTo/mismatching-condition (0.00s)
=== RUN   TestCondition_ValidateKeys
=== RUN   TestCondition_ValidateKeys/blank-condition
=== RUN   TestCondition_ValidateKeys/good-condition
=== RUN   TestCondition_ValidateKeys/key-mismatch
--- PASS: TestCondition_ValidateKeys (0.00s)
    --- PASS: TestCondition_ValidateKeys/blank-condition (0.00s)
    --- PASS: TestCondition_ValidateKeys/good-condition (0.00s)
    --- PASS: TestCondition_ValidateKeys/key-mismatch (0.00s)
=== RUN   TestPolicyList_Validate
=== RUN   TestPolicyList_Validate/bad-assertion
=== RUN   TestPolicyList_Validate/blank-policy
=== RUN   TestPolicyList_Validate/good-policy
=== RUN   TestPolicyList_Validate/bad-keys
--- PASS: TestPolicyList_Validate (0.00s)
    --- PASS: TestPolicyList_Validate/bad-assertion (0.00s)
    --- PASS: TestPolicyList_Validate/blank-policy (0.00s)
    --- PASS: TestPolicyList_Validate/good-policy (0.00s)
    --- PASS: TestPolicyList_Validate/bad-keys (0.00s)
=== RUN   TestPolicyList_Apply
=== RUN   TestPolicyList_Apply/cascading-overwrite
=== RUN   TestPolicyList_Apply/cascading-merge
=== RUN   TestPolicyList_Apply/no-conditions-match
=== RUN   TestPolicyList_Apply/partial-conditions-match
--- PASS: TestPolicyList_Apply (0.00s)
    --- PASS: TestPolicyList_Apply/cascading-overwrite (0.00s)
    --- PASS: TestPolicyList_Apply/cascading-merge (0.00s)
    --- PASS: TestPolicyList_Apply/no-conditions-match (0.00s)
    --- PASS: TestPolicyList_Apply/partial-conditions-match (0.00s)
=== RUN   TestNewPolicyListFromJson
=== RUN   TestNewPolicyListFromJson/invalid-json
=== RUN   TestNewPolicyListFromJson/unknown-field
=== RUN   TestNewPolicyListFromJson/bad-key
=== RUN   TestNewPolicyListFromJson/bad-assertion
=== RUN   TestNewPolicyListFromJson/good-fizzbuzz
--- PASS: TestNewPolicyListFromJson (0.00s)
    --- PASS: TestNewPolicyListFromJson/invalid-json (0.00s)
    --- PASS: TestNewPolicyListFromJson/unknown-field (0.00s)
    --- PASS: TestNewPolicyListFromJson/bad-key (0.00s)
    --- PASS: TestNewPolicyListFromJson/bad-assertion (0.00s)
    --- PASS: TestNewPolicyListFromJson/good-fizzbuzz (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/broker/policy	(cached)
=== RUN   TestFinfo
2021/02/22 15:18:04 Packing...
2021/02/22 15:18:04 Using temp directory: /tmp/brokerpak712168005
2021/02/22 15:18:04 Packing sources...
2021/02/22 15:18:04 	 /tmp/fakepak897707262/terraform -> /tmp/brokerpak712168005/src/terraform.zip
2021/02/22 15:18:04 	 /tmp/fakepak897707262/terraform -> /tmp/brokerpak712168005/src/terraform-provider-google-beta.zip
2021/02/22 15:18:04 Packing binaries...
2021/02/22 15:18:04 	 /tmp/fakepak897707262/terraform -> /tmp/brokerpak712168005/bin/linux/amd64
2021/02/22 15:18:04 	 /tmp/fakepak897707262/terraform -> /tmp/brokerpak712168005/bin/linux/amd64
2021/02/22 15:18:04 	 /tmp/fakepak897707262/terraform -> /tmp/brokerpak712168005/bin/darwin/amd64
2021/02/22 15:18:04 	 /tmp/fakepak897707262/terraform -> /tmp/brokerpak712168005/bin/darwin/amd64
2021/02/22 15:18:04 Packing definitions...
2021/02/22 15:18:04 	/tmp/fakepak897707262/example-service-definition.yml -> /tmp/brokerpak712168005/definitions/service0-example-service.yml
2021/02/22 15:18:04 Creating archive: my-services-pack-1.0.0.brokerpak

--- PASS: TestFinfo (0.03s)
=== RUN   TestRegistryFromLocalBrokerpak
2021/02/22 15:18:04 Packing...
2021/02/22 15:18:04 Using temp directory: /tmp/brokerpak075565247
2021/02/22 15:18:04 Packing sources...
2021/02/22 15:18:04 	 /tmp/fakepak107330784/terraform -> /tmp/brokerpak075565247/src/terraform.zip
2021/02/22 15:18:04 	 /tmp/fakepak107330784/terraform -> /tmp/brokerpak075565247/src/terraform-provider-google-beta.zip
2021/02/22 15:18:04 Packing binaries...
2021/02/22 15:18:04 	 /tmp/fakepak107330784/terraform -> /tmp/brokerpak075565247/bin/linux/amd64
2021/02/22 15:18:04 	 /tmp/fakepak107330784/terraform -> /tmp/brokerpak075565247/bin/linux/amd64
2021/02/22 15:18:04 	 /tmp/fakepak107330784/terraform -> /tmp/brokerpak075565247/bin/darwin/amd64
2021/02/22 15:18:04 	 /tmp/fakepak107330784/terraform -> /tmp/brokerpak075565247/bin/darwin/amd64
2021/02/22 15:18:04 Packing definitions...
2021/02/22 15:18:04 	/tmp/fakepak107330784/example-service-definition.yml -> /tmp/brokerpak075565247/definitions/service0-example-service.yml
2021/02/22 15:18:04 Creating archive: my-services-pack-1.0.0.brokerpak
{"timestamp":"1614007084.647314787","source":"brokerpak-registration","message":"brokerpak-registration.registering","log_level":1,"data":{"excluded-services":null,"location":"/Users/mcampo/workspace/cloud-service-broker/pkg/brokerpak/my-services-pack-1.0.0.brokerpak","name":"local-brokerpak","notes":"","prefix":""}}
--- PASS: TestRegistryFromLocalBrokerpak (0.03s)
=== RUN   TestNewBrokerpakSourceConfigFromPath
=== RUN   TestNewBrokerpakSourceConfigFromPath/is-valid-by-default
=== RUN   TestNewBrokerpakSourceConfigFromPath/has-empty-config-by-default
=== RUN   TestNewBrokerpakSourceConfigFromPath/has-no-excluded-services-by-default
--- PASS: TestNewBrokerpakSourceConfigFromPath (0.00s)
    --- PASS: TestNewBrokerpakSourceConfigFromPath/is-valid-by-default (0.00s)
    --- PASS: TestNewBrokerpakSourceConfigFromPath/has-empty-config-by-default (0.00s)
    --- PASS: TestNewBrokerpakSourceConfigFromPath/has-no-excluded-services-by-default (0.00s)
=== RUN   TestServiceConfig_Validate
=== RUN   TestServiceConfig_Validate/bad_brokerpak_values
=== RUN   TestServiceConfig_Validate/missing_config
=== RUN   TestServiceConfig_Validate/bad_config
=== RUN   TestServiceConfig_Validate/bad_brokerpak_keys
--- PASS: TestServiceConfig_Validate (0.00s)
    --- PASS: TestServiceConfig_Validate/bad_brokerpak_values (0.00s)
    --- PASS: TestServiceConfig_Validate/missing_config (0.00s)
    --- PASS: TestServiceConfig_Validate/bad_config (0.00s)
    --- PASS: TestServiceConfig_Validate/bad_brokerpak_keys (0.00s)
=== RUN   TestNewServerConfigFromEnv
=== RUN   TestNewServerConfigFromEnv/bad_brokerpak_keys
=== RUN   TestNewServerConfigFromEnv/bad_brokerpak_values
=== RUN   TestNewServerConfigFromEnv/missing_config
=== RUN   TestNewServerConfigFromEnv/bad_config
--- PASS: TestNewServerConfigFromEnv (0.00s)
    --- PASS: TestNewServerConfigFromEnv/bad_brokerpak_keys (0.00s)
    --- PASS: TestNewServerConfigFromEnv/bad_brokerpak_values (0.00s)
    --- PASS: TestNewServerConfigFromEnv/missing_config (0.00s)
    --- PASS: TestNewServerConfigFromEnv/bad_config (0.00s)
=== RUN   TestListBrokerpaks
=== PAUSE TestListBrokerpaks
=== RUN   TestDefaultGetters
--- PASS: TestDefaultGetters (0.00s)
=== RUN   TestNewFileGetterClient
--- PASS: TestNewFileGetterClient (0.00s)
=== RUN   TestNewExampleManifest
--- PASS: TestNewExampleManifest (0.00s)
=== RUN   TestUnmarshalManifest
=== RUN   TestUnmarshalManifest/normal
--- PASS: TestUnmarshalManifest (0.00s)
    --- PASS: TestUnmarshalManifest/normal (0.00s)
=== RUN   TestManifestParameter_Validate
=== RUN   TestManifestParameter_Validate/blank_obj
=== RUN   TestManifestParameter_Validate/good_obj
--- PASS: TestManifestParameter_Validate (0.00s)
    --- PASS: TestManifestParameter_Validate/blank_obj (0.00s)
    --- PASS: TestManifestParameter_Validate/good_obj (0.00s)
=== RUN   TestPlatform_Validate
=== RUN   TestPlatform_Validate/blank_obj
=== RUN   TestPlatform_Validate/good_obj
--- PASS: TestPlatform_Validate (0.00s)
    --- PASS: TestPlatform_Validate/blank_obj (0.00s)
    --- PASS: TestPlatform_Validate/good_obj (0.00s)
=== RUN   TestNewRegistrar
2021/02/22 15:18:04 Packing...
2021/02/22 15:18:04 Using temp directory: /tmp/brokerpak764559459
2021/02/22 15:18:04 Packing sources...
2021/02/22 15:18:04 	 /tmp/fakepak786479124/terraform -> /tmp/brokerpak764559459/src/terraform.zip
2021/02/22 15:18:04 	 /tmp/fakepak786479124/terraform -> /tmp/brokerpak764559459/src/terraform-provider-google-beta.zip
2021/02/22 15:18:04 Packing binaries...
2021/02/22 15:18:04 	 /tmp/fakepak786479124/terraform -> /tmp/brokerpak764559459/bin/linux/amd64
2021/02/22 15:18:04 	 /tmp/fakepak786479124/terraform -> /tmp/brokerpak764559459/bin/linux/amd64
2021/02/22 15:18:04 	 /tmp/fakepak786479124/terraform -> /tmp/brokerpak764559459/bin/darwin/amd64
2021/02/22 15:18:04 	 /tmp/fakepak786479124/terraform -> /tmp/brokerpak764559459/bin/darwin/amd64
2021/02/22 15:18:04 Packing definitions...
2021/02/22 15:18:04 	/tmp/fakepak786479124/example-service-definition.yml -> /tmp/brokerpak764559459/definitions/service0-example-service.yml
2021/02/22 15:18:04 Creating archive: my-services-pack-1.0.0.brokerpak
{"timestamp":"1614007084.683336258","source":"brokerpak-registration","message":"brokerpak-registration.registering","log_level":1,"data":{"excluded-services":null,"location":"/Users/mcampo/workspace/cloud-service-broker/pkg/brokerpak/my-services-pack-1.0.0.brokerpak","name":"local-brokerpak","notes":"","prefix":""}}
--- PASS: TestNewRegistrar (0.02s)
=== RUN   TestRegistrar_toDefinitions
=== RUN   TestRegistrar_toDefinitions/prefix
=== RUN   TestRegistrar_toDefinitions/exclude-foo
=== RUN   TestRegistrar_toDefinitions/straight_though
=== RUN   TestRegistrar_toDefinitions/bad_service
--- PASS: TestRegistrar_toDefinitions (0.00s)
    --- PASS: TestRegistrar_toDefinitions/prefix (0.00s)
    --- PASS: TestRegistrar_toDefinitions/exclude-foo (0.00s)
    --- PASS: TestRegistrar_toDefinitions/straight_though (0.00s)
    --- PASS: TestRegistrar_toDefinitions/bad_service (0.00s)
=== RUN   TestRegistrar_resolveParameters
=== RUN   TestRegistrar_resolveParameters/no-params
=== RUN   TestRegistrar_resolveParameters/missing-in-context
=== RUN   TestRegistrar_resolveParameters/contained-in-context
--- PASS: TestRegistrar_resolveParameters (0.00s)
    --- PASS: TestRegistrar_resolveParameters/no-params (0.00s)
    --- PASS: TestRegistrar_resolveParameters/missing-in-context (0.00s)
    --- PASS: TestRegistrar_resolveParameters/contained-in-context (0.00s)
=== RUN   TestRegistrar_walk
=== RUN   TestRegistrar_walk/basic
=== RUN   TestRegistrar_walk/server-config
=== RUN   TestRegistrar_walk/override
=== RUN   TestRegistrar_walk/additive_configs
=== RUN   TestRegistrar_walk/walk_error
=== RUN   TestRegistrar_walk/bad_global_config
=== RUN   TestRegistrar_walk/bad_local_config
--- PASS: TestRegistrar_walk (0.00s)
    --- PASS: TestRegistrar_walk/basic (0.00s)
    --- PASS: TestRegistrar_walk/server-config (0.00s)
    --- PASS: TestRegistrar_walk/override (0.00s)
    --- PASS: TestRegistrar_walk/additive_configs (0.00s)
    --- PASS: TestRegistrar_walk/walk_error (0.00s)
    --- PASS: TestRegistrar_walk/bad_global_config (0.00s)
    --- PASS: TestRegistrar_walk/bad_local_config (0.00s)
=== RUN   TestTerraformResource_Validate
=== RUN   TestTerraformResource_Validate/blank_obj
=== RUN   TestTerraformResource_Validate/good_obj
--- PASS: TestTerraformResource_Validate (0.00s)
    --- PASS: TestTerraformResource_Validate/blank_obj (0.00s)
    --- PASS: TestTerraformResource_Validate/good_obj (0.00s)
=== RUN   TestTerraformResource_Url
=== RUN   TestTerraformResource_Url/custom
=== RUN   TestTerraformResource_Url/handles_relative_path
=== RUN   TestTerraformResource_Url/default
--- PASS: TestTerraformResource_Url (0.01s)
    --- PASS: TestTerraformResource_Url/custom (0.00s)
    --- PASS: TestTerraformResource_Url/handles_relative_path (0.00s)
    --- PASS: TestTerraformResource_Url/default (0.00s)
=== CONT  TestListBrokerpaks
=== RUN   TestListBrokerpaks/directory_does_not_exist
=== RUN   TestListBrokerpaks/directory_contains_no_brokerpaks
2021/02/22 15:18:04 examining file testdata/no-brokerpaks
2021/02/22 15:18:04 examining file testdata/no-brokerpaks/not-a-brokerpak
=== RUN   TestListBrokerpaks/directory_contains_brokerpaks
2021/02/22 15:18:04 examining file testdata/dummy-brokerpaks
2021/02/22 15:18:04 examining file testdata/dummy-brokerpaks/first.brokerpak
2021/02/22 15:18:04 examining file testdata/dummy-brokerpaks/not-a-brokerpak
2021/02/22 15:18:04 examining file testdata/dummy-brokerpaks/second.brokerpak
--- PASS: TestListBrokerpaks (0.02s)
    --- PASS: TestListBrokerpaks/directory_does_not_exist (0.00s)
    --- PASS: TestListBrokerpaks/directory_contains_no_brokerpaks (0.00s)
    --- PASS: TestListBrokerpaks/directory_contains_brokerpaks (0.01s)
=== RUN   ExampleValidate
2021/02/22 15:18:04 Packing...
2021/02/22 15:18:04 Using temp directory: /tmp/brokerpak168542279
2021/02/22 15:18:04 Packing sources...
2021/02/22 15:18:04 	 /tmp/fakepak856430216/terraform -> /tmp/brokerpak168542279/src/terraform.zip
2021/02/22 15:18:04 	 /tmp/fakepak856430216/terraform -> /tmp/brokerpak168542279/src/terraform-provider-google-beta.zip
2021/02/22 15:18:04 Packing binaries...
2021/02/22 15:18:04 	 /tmp/fakepak856430216/terraform -> /tmp/brokerpak168542279/bin/linux/amd64
2021/02/22 15:18:04 	 /tmp/fakepak856430216/terraform -> /tmp/brokerpak168542279/bin/linux/amd64
2021/02/22 15:18:04 	 /tmp/fakepak856430216/terraform -> /tmp/brokerpak168542279/bin/darwin/amd64
2021/02/22 15:18:04 	 /tmp/fakepak856430216/terraform -> /tmp/brokerpak168542279/bin/darwin/amd64
2021/02/22 15:18:04 Packing definitions...
2021/02/22 15:18:04 	/tmp/fakepak856430216/example-service-definition.yml -> /tmp/brokerpak168542279/definitions/service0-example-service.yml
2021/02/22 15:18:04 Creating archive: my-services-pack-1.0.0.brokerpak
--- PASS: ExampleValidate (0.02s)
=== RUN   ExampleBrokerpakSourceConfig_ExcludedServicesSlice
--- PASS: ExampleBrokerpakSourceConfig_ExcludedServicesSlice (0.00s)
=== RUN   ExampleBrokerpakSourceConfig_SetExcludedServices
--- PASS: ExampleBrokerpakSourceConfig_SetExcludedServices (0.00s)
=== RUN   ExampleNewServerConfigFromEnv
--- PASS: ExampleNewServerConfigFromEnv (0.00s)
=== RUN   ExampleNewServerConfigFromEnv_customBuiltin
2021/02/22 15:18:04 examining file testdata/dummy-brokerpaks
2021/02/22 15:18:04 examining file testdata/dummy-brokerpaks/first.brokerpak
2021/02/22 15:18:04 examining file testdata/dummy-brokerpaks/not-a-brokerpak
2021/02/22 15:18:04 examining file testdata/dummy-brokerpaks/second.brokerpak
--- PASS: ExampleNewServerConfigFromEnv_customBuiltin (0.03s)
=== RUN   ExamplePlatform_String
--- PASS: ExamplePlatform_String (0.00s)
=== RUN   ExamplePlatform_Equals
--- PASS: ExamplePlatform_Equals (0.00s)
=== RUN   ExamplePlatform_MatchesCurrent
--- PASS: ExamplePlatform_MatchesCurrent (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/brokerpak	0.258s
=== RUN   TestGetExamplesForAService
=== RUN   TestGetExamplesForAService/service_with_no_examples
=== RUN   TestGetExamplesForAService/google-stackdriver-debugger
=== RUN   TestGetExamplesForAService/google-dataflow
--- PASS: TestGetExamplesForAService (0.00s)
    --- PASS: TestGetExamplesForAService/service_with_no_examples (0.00s)
    --- PASS: TestGetExamplesForAService/google-stackdriver-debugger (0.00s)
    --- PASS: TestGetExamplesForAService/google-dataflow (0.00s)
=== RUN   TestFilterMatchingServiceExamples
=== RUN   TestFilterMatchingServiceExamples/No_ServiceName_or_ExampleName_specified.
=== RUN   TestFilterMatchingServiceExamples/ServiceName_is_specified,_no_ExampleName_is_specified._No_matching_CompleteServiceExample_exists
=== RUN   TestFilterMatchingServiceExamples/ServiceName_is_specified,_no_ExampleName_is_specified._Two_matching_CompleteServiceExample_exist
=== RUN   TestFilterMatchingServiceExamples/Both_ServiceName_and_ExampleName_are_provided,_but_no_matching_CompleteServiceExample_exists.
=== RUN   TestFilterMatchingServiceExamples/Both_ServiceName_and_ExampleName_are_provided,_one_matching_CompleteServiceExample_exists.
--- PASS: TestFilterMatchingServiceExamples (0.00s)
    --- PASS: TestFilterMatchingServiceExamples/No_ServiceName_or_ExampleName_specified. (0.00s)
    --- PASS: TestFilterMatchingServiceExamples/ServiceName_is_specified,_no_ExampleName_is_specified._No_matching_CompleteServiceExample_exists (0.00s)
    --- PASS: TestFilterMatchingServiceExamples/ServiceName_is_specified,_no_ExampleName_is_specified._Two_matching_CompleteServiceExample_exist (0.00s)
    --- PASS: TestFilterMatchingServiceExamples/Both_ServiceName_and_ExampleName_are_provided,_but_no_matching_CompleteServiceExample_exists. (0.00s)
    --- PASS: TestFilterMatchingServiceExamples/Both_ServiceName_and_ExampleName_are_provided,_one_matching_CompleteServiceExample_exists. (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/client	0.020s
=== RUN   TestConfig
Running Suite: Config Suite
===========================
Random Seed: [1m1612971056[0m
Will run [1m2[0m of [1m2[0m specs

[32m•[0m[32m•[0m
[1m[32mRan 2 of 2 Specs in 0.001 seconds[0m
[1m[32mSUCCESS![0m -- [32m[1m2 Passed[0m | [91m[1m0 Failed[0m | [33m[1m0 Pending[0m | [36m[1m0 Skipped[0m
--- PASS: TestConfig (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/config	(cached)
=== RUN   TestDiffStringMap
=== RUN   TestDiffStringMap/same
=== RUN   TestDiffStringMap/removed
=== RUN   TestDiffStringMap/added
=== RUN   TestDiffStringMap/changed
=== RUN   TestDiffStringMap/full-gambit
--- PASS: TestDiffStringMap (0.00s)
    --- PASS: TestDiffStringMap/same (0.00s)
    --- PASS: TestDiffStringMap/removed (0.00s)
    --- PASS: TestDiffStringMap/added (0.00s)
    --- PASS: TestDiffStringMap/changed (0.00s)
    --- PASS: TestDiffStringMap/full-gambit (0.00s)
=== RUN   TestNoOp
=== RUN   TestNoOp/basic
    migration_test.go:112: Running JS migration function
    migration_test.go:120: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
                {
                  "properties": {
                    ".properties.org": {
                      "type": "string",
                      "configurable": true,
                      "credential": false,
                      "value": "system",
                      "optional": false
                    },
                    ".properties.space": {
                      "type": "string",
                      "configurable": true,
                      "credential": false,
                      "value": "cloud-service-broker-space",
                      "optional": false
                    }
                  }
                }
                ;
        
        
        
        tile2env(properties);
        
    migration_test.go:115: Running go migration function
    migration_test.go:132: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
                {
                  "properties": {
                    ".properties.org": {
                      "type": "string",
                      "configurable": true,
                      "credential": false,
                      "value": "system",
                      "optional": false
                    },
                    ".properties.space": {
                      "type": "string",
                      "configurable": true,
                      "credential": false,
                      "value": "cloud-service-broker-space",
                      "optional": false
                    }
                  }
                }
                ;
        
        
        
        tile2env(properties);
        
=== RUN   TestNoOp/empty
    migration_test.go:112: Running JS migration function
    migration_test.go:120: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = {"properties":{}};
        
        
        
        tile2env(properties);
        
    migration_test.go:115: Running go migration function
    migration_test.go:132: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = {"properties":{}};
        
        
        
        tile2env(properties);
        
=== RUN   TestNoOp/collection
    migration_test.go:112: Running JS migration function
    migration_test.go:120: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
              {
                "properties": {
                  ".properties.storage_custom_plans": {
                    "type": "collection",
                    "configurable": true,
                    "credential": false,
                    "value": [
                      {
                        "guid": {
                          "type": "uuid",
                          "configurable": false,
                          "credential": false,
                          "value": "424b9afa-b31a-4517-a764-fbd137e58d3d",
                          "optional": false
                        },
                        "name": {
                          "type": "string",
                          "configurable": true,
                          "credential": false,
                          "value": "custom-storage-plan",
                          "optional": false
                        },
                        "display_name": {
                          "type": "string",
                          "configurable": true,
                          "credential": false,
                          "value": "custom cloud storage plan",
                          "optional": false
                        },
                        "description": {
                          "type": "string",
                          "configurable": true,
                          "credential": false,
                          "value": "custom storage plan description",
                          "optional": false
                        },
                        "service": {
                          "type": "dropdown_select",
                          "configurable": false,
                          "credential": false,
                          "value": "b9e4332e-b42b-4680-bda5-ea1506797474",
                          "optional": false,
                          "options": [
                            {
                              "label": "Google Cloud Storage",
                              "value": "b9e4332e-b42b-4680-bda5-ea1506797474"
                            }
                          ]
                        },
                        "storage_class": {
                          "type": "string",
                          "configurable": true,
                          "credential": false,
                          "value": "standard",
                          "optional": false
                        }
                      }
                    ],
                    "optional": true
                  }
                }
              };
        
        
        
        tile2env(properties);
        
    migration_test.go:115: Running go migration function
    migration_test.go:132: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
              {
                "properties": {
                  ".properties.storage_custom_plans": {
                    "type": "collection",
                    "configurable": true,
                    "credential": false,
                    "value": [
                      {
                        "guid": {
                          "type": "uuid",
                          "configurable": false,
                          "credential": false,
                          "value": "424b9afa-b31a-4517-a764-fbd137e58d3d",
                          "optional": false
                        },
                        "name": {
                          "type": "string",
                          "configurable": true,
                          "credential": false,
                          "value": "custom-storage-plan",
                          "optional": false
                        },
                        "display_name": {
                          "type": "string",
                          "configurable": true,
                          "credential": false,
                          "value": "custom cloud storage plan",
                          "optional": false
                        },
                        "description": {
                          "type": "string",
                          "configurable": true,
                          "credential": false,
                          "value": "custom storage plan description",
                          "optional": false
                        },
                        "service": {
                          "type": "dropdown_select",
                          "configurable": false,
                          "credential": false,
                          "value": "b9e4332e-b42b-4680-bda5-ea1506797474",
                          "optional": false,
                          "options": [
                            {
                              "label": "Google Cloud Storage",
                              "value": "b9e4332e-b42b-4680-bda5-ea1506797474"
                            }
                          ]
                        },
                        "storage_class": {
                          "type": "string",
                          "configurable": true,
                          "credential": false,
                          "value": "standard",
                          "optional": false
                        }
                      }
                    ],
                    "optional": true
                  }
                }
              };
        
        
        
        tile2env(properties);
        
--- PASS: TestNoOp (0.01s)
    --- PASS: TestNoOp/basic (0.00s)
    --- PASS: TestNoOp/empty (0.00s)
    --- PASS: TestNoOp/collection (0.01s)
=== RUN   TestDeleteWhitelistKeys
=== RUN   TestDeleteWhitelistKeys/no-overlap
    migration_test.go:112: Running JS migration function
    migration_test.go:120: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
                {
                  "properties": {
                    ".properties.org": {
                      "type": "string",
                      "configurable": true,
                      "credential": false,
                      "value": "system",
                      "optional": false
                    }
                  }
                };
        
        delete properties.properties['.properties.gsb_service_google_bigquery_whitelist'];
        delete properties.properties['.properties.gsb_service_google_bigtable_whitelist'];
        delete properties.properties['.properties.gsb_service_google_cloudsql_mysql_whitelist'];
        delete properties.properties['.properties.gsb_service_google_cloudsql_postgres_whitelist'];
        delete properties.properties['.properties.gsb_service_google_ml_apis_whitelist'];
        delete properties.properties['.properties.gsb_service_google_pubsub_whitelist'];
        delete properties.properties['.properties.gsb_service_google_spanner_whitelist'];
        delete properties.properties['.properties.gsb_service_google_storage_whitelist'];
        
        
        tile2env(properties);
        
    migration_test.go:115: Running go migration function
    migration_test.go:132: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
                {
                  "properties": {
                    ".properties.org": {
                      "type": "string",
                      "configurable": true,
                      "credential": false,
                      "value": "system",
                      "optional": false
                    }
                  }
                };
        
        
        
        tile2env(properties);
        
=== RUN   TestDeleteWhitelistKeys/one-key
    migration_test.go:112: Running JS migration function
    migration_test.go:120: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
              {
                "properties": {
                  ".properties.org": {"type": "string", "value": "system"},
                  ".properties.gsb_service_google_bigquery_whitelist": { "value": 1 },
                }
              };
        
        delete properties.properties['.properties.gsb_service_google_bigquery_whitelist'];
        delete properties.properties['.properties.gsb_service_google_bigtable_whitelist'];
        delete properties.properties['.properties.gsb_service_google_cloudsql_mysql_whitelist'];
        delete properties.properties['.properties.gsb_service_google_cloudsql_postgres_whitelist'];
        delete properties.properties['.properties.gsb_service_google_ml_apis_whitelist'];
        delete properties.properties['.properties.gsb_service_google_pubsub_whitelist'];
        delete properties.properties['.properties.gsb_service_google_spanner_whitelist'];
        delete properties.properties['.properties.gsb_service_google_storage_whitelist'];
        
        
        tile2env(properties);
        
    migration_test.go:115: Running go migration function
    migration_test.go:132: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
              {
                "properties": {
                  ".properties.org": {"type": "string", "value": "system"},
                  ".properties.gsb_service_google_bigquery_whitelist": { "value": 1 },
                }
              };
        
        
        
        tile2env(properties);
        
=== RUN   TestDeleteWhitelistKeys/all-keys
    migration_test.go:112: Running JS migration function
    migration_test.go:120: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
              {
                "properties": {
                  ".properties.gsb_service_google_bigquery_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_bigtable_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_cloudsql_mysql_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_cloudsql_postgres_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_ml_apis_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_pubsub_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_spanner_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_storage_whitelist": { "value": 1 },
                }
              };
        
        delete properties.properties['.properties.gsb_service_google_bigquery_whitelist'];
        delete properties.properties['.properties.gsb_service_google_bigtable_whitelist'];
        delete properties.properties['.properties.gsb_service_google_cloudsql_mysql_whitelist'];
        delete properties.properties['.properties.gsb_service_google_cloudsql_postgres_whitelist'];
        delete properties.properties['.properties.gsb_service_google_ml_apis_whitelist'];
        delete properties.properties['.properties.gsb_service_google_pubsub_whitelist'];
        delete properties.properties['.properties.gsb_service_google_spanner_whitelist'];
        delete properties.properties['.properties.gsb_service_google_storage_whitelist'];
        
        
        tile2env(properties);
        
    migration_test.go:115: Running go migration function
    migration_test.go:132: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
              {
                "properties": {
                  ".properties.gsb_service_google_bigquery_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_bigtable_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_cloudsql_mysql_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_cloudsql_postgres_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_ml_apis_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_pubsub_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_spanner_whitelist": { "value": 1 },
                  ".properties.gsb_service_google_storage_whitelist": { "value": 1 },
                }
              };
        
        
        
        tile2env(properties);
        
--- PASS: TestDeleteWhitelistKeys (0.02s)
    --- PASS: TestDeleteWhitelistKeys/no-overlap (0.00s)
    --- PASS: TestDeleteWhitelistKeys/one-key (0.00s)
    --- PASS: TestDeleteWhitelistKeys/all-keys (0.01s)
=== RUN   TestFullMigration
=== RUN   TestFullMigration/no-fail-on-empty-properties
    migration_test.go:112: Running JS migration function
    migration_test.go:120: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
                {
                  "properties": {}
                };
        
        {
        // migration: 0, Delete whitelist keys from 4.x
        delete properties.properties['.properties.gsb_service_google_bigquery_whitelist'];
        delete properties.properties['.properties.gsb_service_google_bigtable_whitelist'];
        delete properties.properties['.properties.gsb_service_google_cloudsql_mysql_whitelist'];
        delete properties.properties['.properties.gsb_service_google_cloudsql_postgres_whitelist'];
        delete properties.properties['.properties.gsb_service_google_ml_apis_whitelist'];
        delete properties.properties['.properties.gsb_service_google_pubsub_whitelist'];
        delete properties.properties['.properties.gsb_service_google_spanner_whitelist'];
        delete properties.properties['.properties.gsb_service_google_storage_whitelist'];
        
        }
        
        
        tile2env(properties);
        
    migration_test.go:115: Running go migration function
    migration_test.go:132: 
        function defnToEnv(defn) {
          if (defn.type !== 'collection') {
            return defn.value;
          }
        
          var collectionEntries = defn.value;
          var out = [];
          for (var i = 0; i < collectionEntries.length; i++) {
            var element = collectionEntries[i];
            var elementObj = {};
        
            for (var elementKey in element) {
              elementObj[elementKey] = defnToEnv(element[elementKey]);
            }
        
            out.push(elementObj);
          }
        
          return JSON.stringify(out, null, '  ')
        }
        
        function tile2env(properties) {
          var inner = properties["properties"];
        
          var env = {};
          for(var key in inner) {
            // skip non properties
            if(key.indexOf(".properties.") !== 0){
              continue;
            }
        
            // strip the .properties. prefix
            var envVar = key.substr(12).toUpperCase();
            var defn = inner[key];
        
            env[envVar] = '' + defnToEnv(defn);
          }
        
          return JSON.stringify(env);
        }
        
        properties = 
                {
                  "properties": {}
                };
        
        
        
        tile2env(properties);
        
--- PASS: TestFullMigration (0.01s)
    --- PASS: TestFullMigration/no-fail-on-empty-properties (0.01s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/config/migration	(cached)
=== RUN   TestConfig
Running Suite: CredStore Suite
==============================
Random Seed: [1m1612971056[0m
Will run [1m2[0m of [1m2[0m specs

[32m•[0m[32m•[0m
[1m[32mRan 2 of 2 Specs in 0.277 seconds[0m
[1m[32mSUCCESS![0m -- [32m[1m2 Passed[0m | [91m[1m0 Failed[0m | [33m[1m0 Pending[0m | [36m[1m0 Skipped[0m
--- PASS: TestConfig (0.28s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/credstore	(cached)
?   	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/credstore/credstorefakes	[no test files]
?   	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/generator	[no test files]
=== RUN   TestBuiltinBrokerRegistry
=== RUN   TestBuiltinBrokerRegistry/service-count
=== RUN   TestBuiltinBrokerRegistry/service-names
--- PASS: TestBuiltinBrokerRegistry (0.00s)
    --- PASS: TestBuiltinBrokerRegistry/service-count (0.00s)
    --- PASS: TestBuiltinBrokerRegistry/service-names (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/providers/builtin	0.031s
=== RUN   TestIamMergeBindings
--- PASS: TestIamMergeBindings (0.00s)
=== RUN   TestIamRemoveMemberFromBindings
--- PASS: TestIamRemoveMemberFromBindings (0.00s)
=== RUN   TestServiceAccountWhitelistWithDefault
=== RUN   TestServiceAccountWhitelistWithDefault/default_in_whitelist
=== RUN   TestServiceAccountWhitelistWithDefault/default_not_in_whitelist
--- PASS: TestServiceAccountWhitelistWithDefault (0.00s)
    --- PASS: TestServiceAccountWhitelistWithDefault/default_in_whitelist (0.00s)
    --- PASS: TestServiceAccountWhitelistWithDefault/default_not_in_whitelist (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/providers/builtin/account_managers	(cached)
?   	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/providers/builtin/base	[no test files]
?   	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/providers/builtin/base/basefakes	[no test files]
?   	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/providers/builtin/storage	[no test files]
=== RUN   TestLoadTemplates
=== RUN   TestLoadTemplates/nominal
=== RUN   TestLoadTemplates/missing-template
--- PASS: TestLoadTemplates (0.04s)
    --- PASS: TestLoadTemplates/nominal (0.04s)
    --- PASS: TestLoadTemplates/missing-template (0.00s)
=== RUN   TestUnmarshalDefinition
=== RUN   TestUnmarshalDefinition/template
=== RUN   TestUnmarshalDefinition/templates
--- PASS: TestUnmarshalDefinition (0.00s)
    --- PASS: TestUnmarshalDefinition/template (0.00s)
    --- PASS: TestUnmarshalDefinition/templates (0.00s)
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplateIO
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplateIO/status_output_variable
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplateIO/nomainal
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplateIO/extra_inputs_okay
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplateIO/missing_inputs
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplateIO/extra_template_outputs
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplateIO/missing_template_outputs
--- PASS: TestTfServiceDefinitionV1Action_ValidateTemplateIO (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplateIO/status_output_variable (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplateIO/nomainal (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplateIO/extra_inputs_okay (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplateIO/missing_inputs (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplateIO/extra_template_outputs (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplateIO/missing_template_outputs (0.00s)
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplatesIO
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplatesIO/extra_inputs_okay
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplatesIO/missing_inputs
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplatesIO/extra_template_outputs
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplatesIO/missing_template_outputs
=== RUN   TestTfServiceDefinitionV1Action_ValidateTemplatesIO/nomainal
--- PASS: TestTfServiceDefinitionV1Action_ValidateTemplatesIO (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplatesIO/extra_inputs_okay (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplatesIO/missing_inputs (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplatesIO/extra_template_outputs (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplatesIO/missing_template_outputs (0.00s)
    --- PASS: TestTfServiceDefinitionV1Action_ValidateTemplatesIO/nomainal (0.00s)
=== RUN   TestNewExampleTfServiceDefinition
--- PASS: TestNewExampleTfServiceDefinition (0.00s)
=== RUN   TestTfServiceDefinitionV1Plan_ToPlan
=== RUN   TestTfServiceDefinitionV1Plan_ToPlan/full
--- PASS: TestTfServiceDefinitionV1Plan_ToPlan (0.00s)
    --- PASS: TestTfServiceDefinitionV1Plan_ToPlan/full (0.00s)
=== RUN   TestTfServiceDefinitionV1_ToService
=== RUN   TestTfServiceDefinitionV1_ToService/basic-info
=== RUN   TestTfServiceDefinitionV1_ToService/vars
=== RUN   TestTfServiceDefinitionV1_ToService/examples
=== RUN   TestTfServiceDefinitionV1_ToService/provider-builder
--- PASS: TestTfServiceDefinitionV1_ToService (0.02s)
    --- PASS: TestTfServiceDefinitionV1_ToService/basic-info (0.00s)
    --- PASS: TestTfServiceDefinitionV1_ToService/vars (0.00s)
    --- PASS: TestTfServiceDefinitionV1_ToService/examples (0.00s)
    --- PASS: TestTfServiceDefinitionV1_ToService/provider-builder (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/providers/tf	0.088s
=== RUN   TestModuleDefinition_Inputs
=== RUN   TestModuleDefinition_Inputs/definition
=== RUN   TestModuleDefinition_Inputs/definitions
--- PASS: TestModuleDefinition_Inputs (0.00s)
    --- PASS: TestModuleDefinition_Inputs/definition (0.00s)
    --- PASS: TestModuleDefinition_Inputs/definitions (0.00s)
=== RUN   TestModuleDefinition_Outputs
=== RUN   TestModuleDefinition_Outputs/definition
=== RUN   TestModuleDefinition_Outputs/definitions
--- PASS: TestModuleDefinition_Outputs (0.00s)
    --- PASS: TestModuleDefinition_Outputs/definition (0.00s)
    --- PASS: TestModuleDefinition_Outputs/definitions (0.00s)
=== RUN   TestModuleDefinition_Validate
=== RUN   TestModuleDefinition_Validate/nominal
=== RUN   TestModuleDefinition_Validate/bad-name
=== RUN   TestModuleDefinition_Validate/bad-hcl
=== RUN   TestModuleDefinition_Validate/nominal-definitions
=== RUN   TestModuleDefinition_Validate/bad-hcl-definitions
--- PASS: TestModuleDefinition_Validate (0.00s)
    --- PASS: TestModuleDefinition_Validate/nominal (0.00s)
    --- PASS: TestModuleDefinition_Validate/bad-name (0.00s)
    --- PASS: TestModuleDefinition_Validate/bad-hcl (0.00s)
    --- PASS: TestModuleDefinition_Validate/nominal-definitions (0.00s)
    --- PASS: TestModuleDefinition_Validate/bad-hcl-definitions (0.00s)
=== RUN   TestTfImportTransform_CleanTf
=== RUN   TestTfImportTransform_CleanTf/remove-id
=== RUN   TestTfImportTransform_CleanTf/remove-none
=== RUN   TestTfImportTransform_CleanTf/remove-block
=== RUN   TestTfImportTransform_CleanTf/remove-multiple
--- PASS: TestTfImportTransform_CleanTf (0.00s)
    --- PASS: TestTfImportTransform_CleanTf/remove-id (0.00s)
    --- PASS: TestTfImportTransform_CleanTf/remove-none (0.00s)
    --- PASS: TestTfImportTransform_CleanTf/remove-block (0.00s)
    --- PASS: TestTfImportTransform_CleanTf/remove-multiple (0.00s)
=== RUN   TestTfImportTransform_ReplaceParametersInTf
=== RUN   TestTfImportTransform_ReplaceParametersInTf/none
=== RUN   TestTfImportTransform_ReplaceParametersInTf/edition
=== RUN   TestTfImportTransform_ReplaceParametersInTf/tags
=== RUN   TestTfImportTransform_ReplaceParametersInTf/local
=== RUN   TestTfImportTransform_ReplaceParametersInTf/array
--- PASS: TestTfImportTransform_ReplaceParametersInTf (0.01s)
    --- PASS: TestTfImportTransform_ReplaceParametersInTf/none (0.00s)
    --- PASS: TestTfImportTransform_ReplaceParametersInTf/edition (0.00s)
    --- PASS: TestTfImportTransform_ReplaceParametersInTf/tags (0.00s)
    --- PASS: TestTfImportTransform_ReplaceParametersInTf/local (0.00s)
    --- PASS: TestTfImportTransform_ReplaceParametersInTf/array (0.00s)
=== RUN   TestTfImportTransform_AddTf
=== RUN   TestTfImportTransform_AddTf/count
=== RUN   TestTfImportTransform_AddTf/none
--- PASS: TestTfImportTransform_AddTf (0.00s)
    --- PASS: TestTfImportTransform_AddTf/count (0.00s)
    --- PASS: TestTfImportTransform_AddTf/none (0.00s)
=== RUN   TestTerraformWorkspace_Invariants
=== RUN   TestTerraformWorkspace_Invariants/validate
=== RUN   TestTerraformWorkspace_Invariants/apply
=== RUN   TestTerraformWorkspace_Invariants/destroy
=== RUN   TestTerraformWorkspace_Invariants/import
=== RUN   TestTerraformWorkspace_Invariants/show
--- PASS: TestTerraformWorkspace_Invariants (0.01s)
    --- PASS: TestTerraformWorkspace_Invariants/validate (0.00s)
    --- PASS: TestTerraformWorkspace_Invariants/apply (0.00s)
    --- PASS: TestTerraformWorkspace_Invariants/destroy (0.00s)
    --- PASS: TestTerraformWorkspace_Invariants/import (0.00s)
    --- PASS: TestTerraformWorkspace_Invariants/show (0.00s)
=== RUN   TestTerraformWorkspace_InvariantsFlat
=== RUN   TestTerraformWorkspace_InvariantsFlat/validate
=== RUN   TestTerraformWorkspace_InvariantsFlat/apply
=== RUN   TestTerraformWorkspace_InvariantsFlat/destroy
=== RUN   TestTerraformWorkspace_InvariantsFlat/import
=== RUN   TestTerraformWorkspace_InvariantsFlat/show
--- PASS: TestTerraformWorkspace_InvariantsFlat (0.01s)
    --- PASS: TestTerraformWorkspace_InvariantsFlat/validate (0.00s)
    --- PASS: TestTerraformWorkspace_InvariantsFlat/apply (0.00s)
    --- PASS: TestTerraformWorkspace_InvariantsFlat/destroy (0.00s)
    --- PASS: TestTerraformWorkspace_InvariantsFlat/import (0.00s)
    --- PASS: TestTerraformWorkspace_InvariantsFlat/show (0.00s)
=== RUN   TestCustomTerraformExecutor
=== RUN   TestCustomTerraformExecutor/destroy
=== RUN   TestCustomTerraformExecutor/apply
=== RUN   TestCustomTerraformExecutor/validate
=== RUN   TestCustomTerraformExecutor/init
=== RUN   TestCustomTerraformExecutor/import
=== RUN   TestCustomTerraformExecutor/show
--- PASS: TestCustomTerraformExecutor (0.00s)
    --- PASS: TestCustomTerraformExecutor/destroy (0.00s)
    --- PASS: TestCustomTerraformExecutor/apply (0.00s)
    --- PASS: TestCustomTerraformExecutor/validate (0.00s)
    --- PASS: TestCustomTerraformExecutor/init (0.00s)
    --- PASS: TestCustomTerraformExecutor/import (0.00s)
    --- PASS: TestCustomTerraformExecutor/show (0.00s)
=== RUN   TestCustomEnvironmentExecutor
--- PASS: TestCustomEnvironmentExecutor (0.00s)
=== RUN   ExampleModuleInstance_MarshalDefinition
--- PASS: ExampleModuleInstance_MarshalDefinition (0.00s)
=== RUN   ExampleModuleInstance_MarshalDefinitionEmptyOutputs
--- PASS: ExampleModuleInstance_MarshalDefinitionEmptyOutputs (0.00s)
=== RUN   ExampleNewTfstate_Good
--- PASS: ExampleNewTfstate_Good (0.00s)
=== RUN   ExampleNewTfstate_BadVersion
--- PASS: ExampleNewTfstate_BadVersion (0.00s)
=== RUN   ExampleTfstate_GetOutputs
--- PASS: ExampleTfstate_GetOutputs (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/providers/tf/wrapper	(cached)
=== RUN   TestCfSharingWraper_Services
=== RUN   TestCfSharingWraper_Services/multiple_services
=== RUN   TestCfSharingWraper_Services/error_passed
=== RUN   TestCfSharingWraper_Services/services_and_err
=== RUN   TestCfSharingWraper_Services/nil_services
=== RUN   TestCfSharingWraper_Services/empty_services
=== RUN   TestCfSharingWraper_Services/single_service
=== RUN   TestCfSharingWraper_Services/missing_metadata
--- PASS: TestCfSharingWraper_Services (0.00s)
    --- PASS: TestCfSharingWraper_Services/multiple_services (0.00s)
    --- PASS: TestCfSharingWraper_Services/error_passed (0.00s)
    --- PASS: TestCfSharingWraper_Services/services_and_err (0.00s)
    --- PASS: TestCfSharingWraper_Services/nil_services (0.00s)
    --- PASS: TestCfSharingWraper_Services/empty_services (0.00s)
    --- PASS: TestCfSharingWraper_Services/single_service (0.00s)
    --- PASS: TestCfSharingWraper_Services/missing_metadata (0.00s)
=== RUN   TestNewDocsHandler
--- PASS: TestNewDocsHandler (0.00s)
=== RUN   TestNewExampleHandler
--- PASS: TestNewExampleHandler (0.00s)
=== RUN   TestNewHealthHandler
=== RUN   TestNewHealthHandler/live_endpoint_full
=== RUN   TestNewHealthHandler/live_endpoint_minimal
=== RUN   TestNewHealthHandler/ready_endpoint_minimal
=== RUN   TestNewHealthHandler/ready_endpoint_full
=== RUN   TestNewHealthHandler/live_endpoint_bad
=== RUN   TestNewHealthHandler/ready_endpoint_bad_liveness
=== RUN   TestNewHealthHandler/ready_endpoint_bad
--- PASS: TestNewHealthHandler (0.01s)
    --- PASS: TestNewHealthHandler/live_endpoint_full (0.00s)
    --- PASS: TestNewHealthHandler/live_endpoint_minimal (0.00s)
    --- PASS: TestNewHealthHandler/ready_endpoint_minimal (0.00s)
    --- PASS: TestNewHealthHandler/ready_endpoint_full (0.00s)
    --- PASS: TestNewHealthHandler/live_endpoint_bad (0.00s)
    --- PASS: TestNewHealthHandler/ready_endpoint_bad_liveness (0.00s)
    --- PASS: TestNewHealthHandler/ready_endpoint_bad (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/server	0.040s
?   	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/server/fakes	[no test files]
=== RUN   ExampleToggle_EnvironmentVariable
--- PASS: ExampleToggle_EnvironmentVariable (0.00s)
=== RUN   ExampleToggle_IsActive
--- PASS: ExampleToggle_IsActive (0.00s)
=== RUN   ExampleToggleSet_Toggles
--- PASS: ExampleToggleSet_Toggles (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/toggles	(cached)
=== RUN   TestConstraintBuilder
=== RUN   TestConstraintBuilder/any_type
=== RUN   TestConstraintBuilder/numeric
=== RUN   TestConstraintBuilder/strings
=== RUN   TestConstraintBuilder/arrays
=== RUN   TestConstraintBuilder/objects
=== RUN   TestConstraintBuilder/secondOverwritesFirst
=== RUN   TestConstraintBuilder/empty
=== RUN   TestConstraintBuilder/annotations
--- PASS: TestConstraintBuilder (0.00s)
    --- PASS: TestConstraintBuilder/any_type (0.00s)
    --- PASS: TestConstraintBuilder/numeric (0.00s)
    --- PASS: TestConstraintBuilder/strings (0.00s)
    --- PASS: TestConstraintBuilder/arrays (0.00s)
    --- PASS: TestConstraintBuilder/objects (0.00s)
    --- PASS: TestConstraintBuilder/secondOverwritesFirst (0.00s)
    --- PASS: TestConstraintBuilder/empty (0.00s)
    --- PASS: TestConstraintBuilder/annotations (0.00s)
=== RUN   TestFieldError
=== RUN   TestFieldError/simple_single_no_propagation
=== RUN   TestFieldError/simple_single_propagation
=== RUN   TestFieldError/simple_multiple_propagation
=== RUN   TestFieldError/multiple_propagation_with_details
=== RUN   TestFieldError/single_propagation,_empty_start
=== RUN   TestFieldError/single_propagation,_no_paths
=== RUN   TestFieldError/nil_propagation
=== RUN   TestFieldError/missing_field_propagation
=== RUN   TestFieldError/missing_disallowed_propagation
=== RUN   TestFieldError/invalid_value_propagation
=== RUN   TestFieldError/invalid_value_propagation_(int)
=== RUN   TestFieldError/invalid_value_propagation_(duration)
=== RUN   TestFieldError/missing_mutually_exclusive_fields
=== RUN   TestFieldError/multiple_mutually_exclusive_fields
=== RUN   TestFieldError/invalid_key_name
=== RUN   TestFieldError/invalid_key_name_with_details_array
=== RUN   TestFieldError/disallowed_update_deprecated_fields
=== RUN   TestFieldError/very_complex_to_simple
=== RUN   TestFieldError/exponentially_grows
=== RUN   TestFieldError/path_grows_but_details_are_different
=== RUN   TestFieldError/very_complex_to_complex
=== RUN   TestFieldError/out_of_bound_value
=== RUN   TestFieldError/out_of_bound_value_(int)
=== RUN   TestFieldError/out_of_bound_value_(time.Duration)
--- PASS: TestFieldError (0.01s)
    --- PASS: TestFieldError/simple_single_no_propagation (0.00s)
    --- PASS: TestFieldError/simple_single_propagation (0.00s)
    --- PASS: TestFieldError/simple_multiple_propagation (0.00s)
    --- PASS: TestFieldError/multiple_propagation_with_details (0.00s)
    --- PASS: TestFieldError/single_propagation,_empty_start (0.00s)
    --- PASS: TestFieldError/single_propagation,_no_paths (0.00s)
    --- PASS: TestFieldError/nil_propagation (0.00s)
    --- PASS: TestFieldError/missing_field_propagation (0.00s)
    --- PASS: TestFieldError/missing_disallowed_propagation (0.00s)
    --- PASS: TestFieldError/invalid_value_propagation (0.00s)
    --- PASS: TestFieldError/invalid_value_propagation_(int) (0.00s)
    --- PASS: TestFieldError/invalid_value_propagation_(duration) (0.00s)
    --- PASS: TestFieldError/missing_mutually_exclusive_fields (0.00s)
    --- PASS: TestFieldError/multiple_mutually_exclusive_fields (0.00s)
    --- PASS: TestFieldError/invalid_key_name (0.00s)
    --- PASS: TestFieldError/invalid_key_name_with_details_array (0.00s)
    --- PASS: TestFieldError/disallowed_update_deprecated_fields (0.00s)
    --- PASS: TestFieldError/very_complex_to_simple (0.00s)
    --- PASS: TestFieldError/exponentially_grows (0.00s)
    --- PASS: TestFieldError/path_grows_but_details_are_different (0.00s)
    --- PASS: TestFieldError/very_complex_to_complex (0.00s)
    --- PASS: TestFieldError/out_of_bound_value (0.00s)
    --- PASS: TestFieldError/out_of_bound_value_(int) (0.00s)
    --- PASS: TestFieldError/out_of_bound_value_(time.Duration) (0.00s)
=== RUN   TestViaIndexOrKeyFieldError
=== RUN   TestViaIndexOrKeyFieldError/nil
=== RUN   TestViaIndexOrKeyFieldError/nil_with_prefix
=== RUN   TestViaIndexOrKeyFieldError/simple_single_no_propagation
=== RUN   TestViaIndexOrKeyFieldError/simple_key
=== RUN   TestViaIndexOrKeyFieldError/missing_field_propagation
=== RUN   TestViaIndexOrKeyFieldError/invalid_key_name
=== RUN   TestViaIndexOrKeyFieldError/invalid_key_name_with_keys
=== RUN   TestViaIndexOrKeyFieldError/multi_prefixes_provided
=== RUN   TestViaIndexOrKeyFieldError/use_helper_viaFieldIndex
=== RUN   TestViaIndexOrKeyFieldError/use_helper_viaFieldKey
=== RUN   TestViaIndexOrKeyFieldError/bypass_helpers
=== RUN   TestViaIndexOrKeyFieldError/multi_paths_provided
=== RUN   TestViaIndexOrKeyFieldError/manual_index
=== RUN   TestViaIndexOrKeyFieldError/manual_multiple_index
=== RUN   TestViaIndexOrKeyFieldError/manual_keys
=== RUN   TestViaIndexOrKeyFieldError/manual_index_and_keys
=== RUN   TestViaIndexOrKeyFieldError/leaf_field_error_with_index
=== RUN   TestViaIndexOrKeyFieldError/leaf_field_error_with_index_(int)
=== RUN   TestViaIndexOrKeyFieldError/nil_propagation
--- PASS: TestViaIndexOrKeyFieldError (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/nil (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/nil_with_prefix (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/simple_single_no_propagation (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/simple_key (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/missing_field_propagation (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/invalid_key_name (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/invalid_key_name_with_keys (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/multi_prefixes_provided (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/use_helper_viaFieldIndex (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/use_helper_viaFieldKey (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/bypass_helpers (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/multi_paths_provided (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/manual_index (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/manual_multiple_index (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/manual_keys (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/manual_index_and_keys (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/leaf_field_error_with_index (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/leaf_field_error_with_index_(int) (0.00s)
    --- PASS: TestViaIndexOrKeyFieldError/nil_propagation (0.00s)
=== RUN   TestNilError
--- PASS: TestNilError (0.00s)
=== RUN   TestAlso
=== RUN   TestAlso/nil
=== RUN   TestAlso/nil_all_the_way
=== RUN   TestAlso/simple
=== RUN   TestAlso/lots_of_also
--- PASS: TestAlso (0.00s)
    --- PASS: TestAlso/nil (0.00s)
    --- PASS: TestAlso/nil_all_the_way (0.00s)
    --- PASS: TestAlso/simple (0.00s)
    --- PASS: TestAlso/lots_of_also (0.00s)
=== RUN   TestMergeFieldErrors
=== RUN   TestMergeFieldErrors/simple
=== RUN   TestMergeFieldErrors/conflict
=== RUN   TestMergeFieldErrors/lots_of_also
--- PASS: TestMergeFieldErrors (0.00s)
    --- PASS: TestMergeFieldErrors/simple (0.00s)
    --- PASS: TestMergeFieldErrors/conflict (0.00s)
    --- PASS: TestMergeFieldErrors/lots_of_also (0.00s)
=== RUN   TestAlsoStaysNil
--- PASS: TestAlsoStaysNil (0.00s)
=== RUN   TestFlatten
=== RUN   TestFlatten/simple
=== RUN   TestFlatten/no_brackets
=== RUN   TestFlatten/err([0]).ViaField(bar).ViaField(foo)
=== RUN   TestFlatten/err(bar).ViaIndex(0).ViaField(foo)
=== RUN   TestFlatten/err(bar).ViaField(foo).ViaIndex(0)
=== RUN   TestFlatten/err(bar).ViaIndex(0).ViaIndex[1].ViaField(foo)
=== RUN   TestFlatten/err(foo).ViaField(bar).ViaIndex[0].ViaField(baz)
--- PASS: TestFlatten (0.00s)
    --- PASS: TestFlatten/simple (0.00s)
    --- PASS: TestFlatten/no_brackets (0.00s)
    --- PASS: TestFlatten/err([0]).ViaField(bar).ViaField(foo) (0.00s)
    --- PASS: TestFlatten/err(bar).ViaIndex(0).ViaField(foo) (0.00s)
    --- PASS: TestFlatten/err(bar).ViaField(foo).ViaIndex(0) (0.00s)
    --- PASS: TestFlatten/err(bar).ViaIndex(0).ViaIndex[1].ViaField(foo) (0.00s)
    --- PASS: TestFlatten/err(foo).ViaField(bar).ViaIndex[0].ViaField(baz) (0.00s)
=== RUN   ExampleErrIfNotOSBName
--- PASS: ExampleErrIfNotOSBName (0.00s)
=== RUN   ExampleErrIfNotJSONSchemaType
--- PASS: ExampleErrIfNotJSONSchemaType (0.00s)
=== RUN   ExampleErrIfNotHCL
--- PASS: ExampleErrIfNotHCL (0.00s)
=== RUN   ExampleErrIfNotTerraformIdentifier
--- PASS: ExampleErrIfNotTerraformIdentifier (0.00s)
=== RUN   ExampleErrIfNotJSON
--- PASS: ExampleErrIfNotJSON (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/validation	(cached)
=== RUN   TestContextBuilder
=== RUN   TestContextBuilder/MergeJsonObject_valid_message
=== RUN   TestContextBuilder/an_empty_context
=== RUN   TestContextBuilder/MergeDefaults_blank_type
=== RUN   TestContextBuilder/MergeJsonObject_invalid_message
=== RUN   TestContextBuilder/User_overrides_constant
=== RUN   TestContextBuilder/MergeDefaults_non-string
=== RUN   TestContextBuilder/MergeDefaults_no-overwrite
=== RUN   TestContextBuilder/MergeDefaults_integer
=== RUN   TestContextBuilder/MergeDefaults_overwrite
=== RUN   TestContextBuilder/MergeDefaults_number
=== RUN   TestContextBuilder/MergeDefaults_string
=== RUN   TestContextBuilder/MergeMap_multi-key
=== RUN   TestContextBuilder/MergeDefaults_no_defaults
=== RUN   TestContextBuilder/MergeDefaults_object
=== RUN   TestContextBuilder/MergeEvalResult_accumulates_context
=== RUN   TestContextBuilder/Basic_constants
=== RUN   TestContextBuilder/MergeMap_blank_okay
=== RUN   TestContextBuilder/MergeDefaults_basic-string
=== RUN   TestContextBuilder/MergeDefaults_template_string
=== RUN   TestContextBuilder/MergeDefaults_array
=== RUN   TestContextBuilder/MergeEvalResult_errors
=== RUN   TestContextBuilder/MergeMap_overwrite
=== RUN   TestContextBuilder/MergeDefaults_boolean
=== RUN   TestContextBuilder/MergeStruct_without_JSON_Tags
=== RUN   TestContextBuilder/MergeDefaults_bad_type
=== RUN   TestContextBuilder/MergeJsonObject_blank_message
=== RUN   TestContextBuilder/MergeStruct_with_JSON_Tags
--- PASS: TestContextBuilder (0.01s)
    --- PASS: TestContextBuilder/MergeJsonObject_valid_message (0.00s)
    --- PASS: TestContextBuilder/an_empty_context (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_blank_type (0.00s)
    --- PASS: TestContextBuilder/MergeJsonObject_invalid_message (0.00s)
    --- PASS: TestContextBuilder/User_overrides_constant (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_non-string (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_no-overwrite (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_integer (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_overwrite (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_number (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_string (0.00s)
    --- PASS: TestContextBuilder/MergeMap_multi-key (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_no_defaults (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_object (0.00s)
    --- PASS: TestContextBuilder/MergeEvalResult_accumulates_context (0.00s)
    --- PASS: TestContextBuilder/Basic_constants (0.00s)
    --- PASS: TestContextBuilder/MergeMap_blank_okay (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_basic-string (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_template_string (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_array (0.00s)
    --- PASS: TestContextBuilder/MergeEvalResult_errors (0.00s)
    --- PASS: TestContextBuilder/MergeMap_overwrite (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_boolean (0.00s)
    --- PASS: TestContextBuilder/MergeStruct_without_JSON_Tags (0.00s)
    --- PASS: TestContextBuilder/MergeDefaults_bad_type (0.00s)
    --- PASS: TestContextBuilder/MergeJsonObject_blank_message (0.00s)
    --- PASS: TestContextBuilder/MergeStruct_with_JSON_Tags (0.00s)
=== RUN   TestDefaultVariable_Validate
=== RUN   TestDefaultVariable_Validate/empty
=== RUN   TestDefaultVariable_Validate/bad_type
=== RUN   TestDefaultVariable_Validate/good
--- PASS: TestDefaultVariable_Validate (0.00s)
    --- PASS: TestDefaultVariable_Validate/empty (0.00s)
    --- PASS: TestDefaultVariable_Validate/bad_type (0.00s)
    --- PASS: TestDefaultVariable_Validate/good (0.00s)
=== RUN   TestVarContext_GetString
=== RUN   TestVarContext_GetString/int
=== RUN   TestVarContext_GetString/string
=== RUN   TestVarContext_GetString/missing_key
--- PASS: TestVarContext_GetString (0.00s)
    --- PASS: TestVarContext_GetString/int (0.00s)
    --- PASS: TestVarContext_GetString/string (0.00s)
    --- PASS: TestVarContext_GetString/missing_key (0.00s)
=== RUN   TestVarContext_GetInt
=== RUN   TestVarContext_GetInt/int
=== RUN   TestVarContext_GetInt/string
=== RUN   TestVarContext_GetInt/missing_key
--- PASS: TestVarContext_GetInt (0.00s)
    --- PASS: TestVarContext_GetInt/int (0.00s)
    --- PASS: TestVarContext_GetInt/string (0.00s)
    --- PASS: TestVarContext_GetInt/missing_key (0.00s)
=== RUN   TestVarContext_GetBool
=== RUN   TestVarContext_GetBool/zero
=== RUN   TestVarContext_GetBool/string
=== RUN   TestVarContext_GetBool/missing_key
=== RUN   TestVarContext_GetBool/true_bool
=== RUN   TestVarContext_GetBool/false_bool
=== RUN   TestVarContext_GetBool/true_string_bool
=== RUN   TestVarContext_GetBool/false_string_bool
=== RUN   TestVarContext_GetBool/int
--- PASS: TestVarContext_GetBool (0.00s)
    --- PASS: TestVarContext_GetBool/zero (0.00s)
    --- PASS: TestVarContext_GetBool/string (0.00s)
    --- PASS: TestVarContext_GetBool/missing_key (0.00s)
    --- PASS: TestVarContext_GetBool/true_bool (0.00s)
    --- PASS: TestVarContext_GetBool/false_bool (0.00s)
    --- PASS: TestVarContext_GetBool/true_string_bool (0.00s)
    --- PASS: TestVarContext_GetBool/false_string_bool (0.00s)
    --- PASS: TestVarContext_GetBool/int (0.00s)
=== RUN   TestVarContext_GetStringMapString
=== RUN   TestVarContext_GetStringMapString/single_map
=== RUN   TestVarContext_GetStringMapString/json_map
=== RUN   TestVarContext_GetStringMapString/string
--- PASS: TestVarContext_GetStringMapString (0.00s)
    --- PASS: TestVarContext_GetStringMapString/single_map (0.00s)
    --- PASS: TestVarContext_GetStringMapString/json_map (0.00s)
    --- PASS: TestVarContext_GetStringMapString/string (0.00s)
=== RUN   TestVarContext_ToJson
--- PASS: TestVarContext_ToJson (0.00s)
=== RUN   ExampleContextBuilder_BuildMap
--- PASS: ExampleContextBuilder_BuildMap (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/varcontext	(cached)
=== RUN   TestEval
=== RUN   TestEval/Escaped_Evaluation
=== RUN   TestEval/No_Short_Circuit
=== RUN   TestEval/Non-Templated_String
=== RUN   TestEval/map_flatten
=== RUN   TestEval/Conditionals_True
=== RUN   TestEval/env_var
=== RUN   TestEval/Regex
=== RUN   TestEval/Conditionals_False
=== RUN   TestEval/json_marshal_array
=== RUN   TestEval/Bad_Regex
=== RUN   TestEval/missing_env_var
=== RUN   TestEval/missing_config_var
=== RUN   TestEval/Truncate_Required
=== RUN   TestEval/Basic_Evaluation
=== RUN   TestEval/Query_Escape
=== RUN   TestEval/json_marshal_numeric
=== RUN   TestEval/config_val
=== RUN   TestEval/Query_Amp
=== RUN   TestEval/json_marshal
=== RUN   TestEval/json_marshal_true
=== RUN   TestEval/json_marshal_false
=== RUN   TestEval/Missing_Variable
=== RUN   TestEval/Bad_Template
=== RUN   TestEval/Variable_Substitution
=== RUN   TestEval/Truncate_Not_Required
=== RUN   TestEval/map_flatten_blank
=== RUN   TestEval/assert_failure
=== RUN   TestEval/assert_message
=== RUN   TestEval/Counter
=== RUN   TestEval/json_marshal_string
=== RUN   TestEval/assert_success
=== RUN   TestEval/map_flatten_one
--- PASS: TestEval (0.01s)
    --- PASS: TestEval/Escaped_Evaluation (0.00s)
    --- PASS: TestEval/No_Short_Circuit (0.00s)
    --- PASS: TestEval/Non-Templated_String (0.00s)
    --- PASS: TestEval/map_flatten (0.00s)
    --- PASS: TestEval/Conditionals_True (0.00s)
    --- PASS: TestEval/env_var (0.00s)
    --- PASS: TestEval/Regex (0.00s)
    --- PASS: TestEval/Conditionals_False (0.00s)
    --- PASS: TestEval/json_marshal_array (0.00s)
    --- PASS: TestEval/Bad_Regex (0.00s)
    --- PASS: TestEval/missing_env_var (0.00s)
    --- PASS: TestEval/missing_config_var (0.00s)
    --- PASS: TestEval/Truncate_Required (0.00s)
    --- PASS: TestEval/Basic_Evaluation (0.00s)
    --- PASS: TestEval/Query_Escape (0.00s)
    --- PASS: TestEval/json_marshal_numeric (0.00s)
    --- PASS: TestEval/config_val (0.00s)
    --- PASS: TestEval/Query_Amp (0.00s)
    --- PASS: TestEval/json_marshal (0.00s)
    --- PASS: TestEval/json_marshal_true (0.00s)
    --- PASS: TestEval/json_marshal_false (0.00s)
    --- PASS: TestEval/Missing_Variable (0.00s)
    --- PASS: TestEval/Bad_Template (0.00s)
    --- PASS: TestEval/Variable_Substitution (0.00s)
    --- PASS: TestEval/Truncate_Not_Required (0.00s)
    --- PASS: TestEval/map_flatten_blank (0.00s)
    --- PASS: TestEval/assert_failure (0.00s)
    --- PASS: TestEval/assert_message (0.00s)
    --- PASS: TestEval/Counter (0.00s)
    --- PASS: TestEval/json_marshal_string (0.00s)
    --- PASS: TestEval/assert_success (0.00s)
    --- PASS: TestEval/map_flatten_one (0.00s)
=== RUN   TestHilFuncTimeNano
--- PASS: TestHilFuncTimeNano (0.00s)
=== RUN   TestHilFuncRandBase64
--- PASS: TestHilFuncRandBase64 (0.00s)
=== RUN   TestHilToInterface
=== RUN   TestHilToInterface/string
=== RUN   TestHilToInterface/numeric
=== RUN   TestHilToInterface/bool-true
=== RUN   TestHilToInterface/bool-false
=== RUN   TestHilToInterface/str-array
=== RUN   TestHilToInterface/mixed-array
=== RUN   TestHilToInterface/object
--- PASS: TestHilToInterface (0.00s)
    --- PASS: TestHilToInterface/string (0.00s)
    --- PASS: TestHilToInterface/numeric (0.00s)
    --- PASS: TestHilToInterface/bool-true (0.00s)
    --- PASS: TestHilToInterface/bool-false (0.00s)
    --- PASS: TestHilToInterface/str-array (0.00s)
    --- PASS: TestHilToInterface/mixed-array (0.00s)
    --- PASS: TestHilToInterface/object (0.00s)
=== RUN   TestIsHILExpression
=== RUN   TestIsHILExpression/plain_string
=== RUN   TestIsHILExpression/bad_expression
=== RUN   TestIsHILExpression/expression
=== RUN   TestIsHILExpression/constant
--- PASS: TestIsHILExpression (0.00s)
    --- PASS: TestIsHILExpression/plain_string (0.00s)
    --- PASS: TestIsHILExpression/bad_expression (0.00s)
    --- PASS: TestIsHILExpression/expression (0.00s)
    --- PASS: TestIsHILExpression/constant (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/pkg/varcontext/interpolation	(cached)
=== RUN   TestExtractDefaultProvisionLabels
--- PASS: TestExtractDefaultProvisionLabels (0.00s)
=== RUN   TestSplitNewlineDelimitedList
=== RUN   TestSplitNewlineDelimitedList/crlf
=== RUN   TestSplitNewlineDelimitedList/trim
=== RUN   TestSplitNewlineDelimitedList/none
=== RUN   TestSplitNewlineDelimitedList/blank
=== RUN   TestSplitNewlineDelimitedList/single
--- PASS: TestSplitNewlineDelimitedList (0.00s)
    --- PASS: TestSplitNewlineDelimitedList/crlf (0.00s)
    --- PASS: TestSplitNewlineDelimitedList/trim (0.00s)
    --- PASS: TestSplitNewlineDelimitedList/none (0.00s)
    --- PASS: TestSplitNewlineDelimitedList/blank (0.00s)
    --- PASS: TestSplitNewlineDelimitedList/single (0.00s)
=== RUN   ExampleStringSet_Add
--- PASS: ExampleStringSet_Add (0.00s)
=== RUN   ExampleNewStringSet
--- PASS: ExampleNewStringSet (0.00s)
=== RUN   ExampleNewStringSetFromStringMapKeys
--- PASS: ExampleNewStringSetFromStringMapKeys (0.00s)
=== RUN   ExampleStringSet_ToSlice
--- PASS: ExampleStringSet_ToSlice (0.00s)
=== RUN   ExampleStringSet_IsEmpty
--- PASS: ExampleStringSet_IsEmpty (0.00s)
=== RUN   ExampleStringSet_Equals
--- PASS: ExampleStringSet_Equals (0.00s)
=== RUN   ExampleStringSet_Contains
--- PASS: ExampleStringSet_Contains (0.00s)
=== RUN   ExampleStringSet_Minus
--- PASS: ExampleStringSet_Minus (0.00s)
=== RUN   ExamplePropertyToEnv
--- PASS: ExamplePropertyToEnv (0.00s)
=== RUN   ExamplePropertyToEnvUnprefixed
--- PASS: ExamplePropertyToEnvUnprefixed (0.00s)
=== RUN   ExampleSetParameter
--- PASS: ExampleSetParameter (0.00s)
=== RUN   ExampleUnmarshalObjectRemainder
--- PASS: ExampleUnmarshalObjectRemainder (0.00s)
=== RUN   ExampleGetDefaultProjectId
--- PASS: ExampleGetDefaultProjectId (0.00s)
=== RUN   ExampleIndent
--- PASS: ExampleIndent (0.00s)
=== RUN   ExampleCopyStringMap
--- PASS: ExampleCopyStringMap (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/utils	(cached)
=== RUN   TestBufferCallback_Write
--- PASS: TestBufferCallback_Write (0.00s)
=== RUN   TestBufferCallback_Close
--- PASS: TestBufferCallback_Close (0.00s)
=== RUN   TestCopy
=== RUN   TestCopy/Source_Init_Err
=== RUN   TestCopy/Dest_Init_Err
=== RUN   TestCopy/Dest_Close_Err
--- PASS: TestCopy (0.00s)
    --- PASS: TestCopy/Source_Init_Err (0.00s)
    --- PASS: TestCopy/Dest_Init_Err (0.00s)
    --- PASS: TestCopy/Dest_Close_Err (0.00s)
=== RUN   ExampleYaml
--- PASS: ExampleYaml (0.00s)
=== RUN   ExampleFile
--- PASS: ExampleFile (0.00s)
=== RUN   ExampleMultiCloser
--- PASS: ExampleMultiCloser (0.00s)
=== RUN   ExampleMultiCloser_Error
--- PASS: ExampleMultiCloser_Error (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/utils/stream	(cached)
=== RUN   TestClean
=== RUN   TestClean/blank
=== RUN   TestClean/absolute
=== RUN   TestClean/relative-dot
=== RUN   TestClean/backslash
--- PASS: TestClean (0.00s)
    --- PASS: TestClean/blank (0.00s)
    --- PASS: TestClean/absolute (0.00s)
    --- PASS: TestClean/relative-dot (0.00s)
    --- PASS: TestClean/backslash (0.00s)
=== RUN   TestContainsDotDot
--- PASS: TestContainsDotDot (0.00s)
=== RUN   ExampleList
--- PASS: ExampleList (0.00s)
=== RUN   ExampleFind
--- PASS: ExampleFind (0.00s)
=== RUN   ExampleOpen
--- PASS: ExampleOpen (0.00s)
=== RUN   ExampleExtract
--- PASS: ExampleExtract (0.00s)
PASS
ok  	github.com/cloudfoundry-incubator/cloud-service-broker/utils/ziputil	(cached)
